2019-07-25 06:54:29,146 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 06:54:29,146 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 06:54:29,274 INFO - Request finished in 124.8573ms 200 
2019-07-25 06:54:29,280 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 06:54:29,655 INFO - Request finished in 490.3367ms 200 text/html
2019-07-25 06:54:30,254 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 06:54:30,263 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 06:54:32,740 INFO - Request finished in 2490.1296ms 200 application/json;charset=utf-8
2019-07-25 06:57:33,404 INFO - Request starting HTTP/1.1 POST http://localhost:59821/api/v1/Employee/Employee application/json-patch+json 162985
2019-07-25 06:57:33,410 INFO - CORS policy execution failed.
2019-07-25 06:57:33,411 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 06:57:33,414 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 06:57:33,537 INFO - Route matched with {action = "PostEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 06:57:33,548 INFO - Authorization failed.
2019-07-25 06:57:33,549 INFO - Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
2019-07-25 06:57:33,554 INFO - Executing ChallengeResult with authentication schemes ().
2019-07-25 06:57:33,872 INFO - AuthenticationScheme: BearerIdentityServerAuthenticationJwt was challenged.
2019-07-25 06:57:33,874 INFO - AuthenticationScheme: Bearer was challenged.
2019-07-25 06:57:33,879 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API) in 337.2817ms
2019-07-25 06:57:33,882 INFO - Request finished in 479.2119ms 401 
2019-07-25 06:57:33,896 INFO - Connection id "0HLOGMF5FRSSK", Request id "0HLOGMF5FRSSK:00000001": the application completed without reading the entire request body.
2019-07-25 06:58:02,997 INFO - Request starting HTTP/1.1 GET http://localhost:59821/oauth2-redirect.html  
2019-07-25 06:58:03,000 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 06:58:03,006 INFO - The file /oauth2-redirect.html was not modified
2019-07-25 06:58:03,009 INFO - Request finished in 11.5189ms 304 text/html
2019-07-25 06:58:07,218 INFO - Request starting HTTP/1.1 POST http://localhost:59821/api/v1/Employee/Employee application/json-patch+json 162985
2019-07-25 06:58:07,225 INFO - CORS policy execution failed.
2019-07-25 06:58:07,229 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 06:58:09,062 INFO - Successfully validated the token.
2019-07-25 06:58:09,070 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 06:58:09,073 INFO - Route matched with {action = "PostEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 06:58:09,075 INFO - Authorization was successful.
2019-07-25 06:58:11,757 INFO - 'PostEmployeeAsync' has been invoked
2019-07-25 06:58:13,146 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API) with arguments (Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 06:58:15,799 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 06:58:16,805 INFO - Executed DbCommand (92ms) [Parameters=[@__entity_IdentityNumber_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EmployeeID], [item].[Address], [item].[BirthDate], [item].[Citizenship], [item].[dateInsert], [item].[dateUpdate], [item].[FirstName], [item].[FirstNameEN], [item].[GenderID], [item].[IdentificationTypeID], [item].[IdentityNumber], [item].[LastName], [item].[LastNameEN], [item].[OrganizationID], [item].[PassportCountryID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_HR_Employee] AS [item]
WHERE [item].[IdentityNumber] = @__entity_IdentityNumber_0
2019-07-25 06:58:49,911 ERROR - Failed executing DbCommand (79ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 50), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (Size = 50), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Size = 50), @p12='?' (Size = 50), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BB_HR_Employee] ([EmployeeID], [Address], [BirthDate], [Citizenship], [dateInsert], [dateUpdate], [FirstName], [FirstNameEN], [GenderID], [IdentificationTypeID], [IdentityNumber], [LastName], [LastNameEN], [OrganizationID], [PassportCountryID], [userInsert], [UserUpdate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [state]
FROM [BB_HR_Employee]
WHERE @@ROWCOUNT = 1 AND [EmployeeID] = @p0;
System.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'BB_HR_Employee' when IDENTITY_INSERT is set to OFF.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:d6bb9a4e-bf6f-4e54-9406-2b931cedc77c
Error Number:544,State:1,Class:16
2019-07-25 06:58:50,003 ERROR - An exception occurred in the database while saving changes for context type 'Malam.Mastpen.Core.DAL.MastpenBitachonDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert explicit value for identity column in table 'BB_HR_Employee' when IDENTITY_INSERT is set to OFF.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert explicit value for identity column in table 'BB_HR_Employee' when IDENTITY_INSERT is set to OFF.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-25 06:58:50,086 INFO - The PostEmployeeAsync have been retrieved successfully.
2019-07-25 06:58:50,089 INFO - test log
2019-07-25 06:58:50,126 ERROR - There was a critical error on 'PostEmployeeAsync':   Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert explicit value for identity column in table 'BB_HR_Employee' when IDENTITY_INSERT is set to OFF.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Malam.Mastpen.Core.BL.Services.EmployeeService.CreateEmployeeAsync(Employee employee) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.Core\BL\Services\EmployeeService.cs:line 86
   at Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync(EmployeeRequest request) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.API\Controllers\EmployeeController.cs:line 154
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextExceptionFilterAsync()
2019-07-25 06:58:50,134 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.PagedResponse`1[[Malam.Mastpen.Core.DAL.Entities.Employee, Malam.Mastpen.HR.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2019-07-25 06:58:50,148 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API) in 41118.8484ms
2019-07-25 06:58:50,166 INFO - Request finished in 43002.2931ms 200 application/json; charset=utf-8
2019-07-25 07:00:55,484 INFO - Request starting HTTP/1.1 POST http://localhost:59821/api/v1/Employee/Employee application/json-patch+json 162985
2019-07-25 07:00:55,491 INFO - CORS policy execution failed.
2019-07-25 07:00:55,497 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:00:55,502 INFO - Successfully validated the token.
2019-07-25 07:00:55,511 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:00:55,513 INFO - Route matched with {action = "PostEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:00:55,516 INFO - Authorization was successful.
2019-07-25 07:01:00,123 INFO - 'PostEmployeeAsync' has been invoked
2019-07-25 07:01:00,129 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API) with arguments (Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 07:01:01,360 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 07:01:01,445 INFO - Executed DbCommand (71ms) [Parameters=[@__entity_IdentityNumber_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EmployeeID], [item].[Address], [item].[BirthDate], [item].[Citizenship], [item].[dateInsert], [item].[dateUpdate], [item].[FirstName], [item].[FirstNameEN], [item].[GenderID], [item].[IdentificationTypeID], [item].[IdentityNumber], [item].[LastName], [item].[LastNameEN], [item].[OrganizationID], [item].[PassportCountryID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_HR_Employee] AS [item]
WHERE [item].[IdentityNumber] = @__entity_IdentityNumber_0
2019-07-25 07:01:04,599 ERROR - Failed executing DbCommand (72ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 50), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (Size = 50), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Size = 50), @p12='?' (Size = 50), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BB_HR_Employee] ([EmployeeID], [Address], [BirthDate], [Citizenship], [dateInsert], [dateUpdate], [FirstName], [FirstNameEN], [GenderID], [IdentificationTypeID], [IdentityNumber], [LastName], [LastNameEN], [OrganizationID], [PassportCountryID], [userInsert], [UserUpdate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [state]
FROM [BB_HR_Employee]
WHERE @@ROWCOUNT = 1 AND [EmployeeID] = @p0;
System.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'BB_HR_Employee' when IDENTITY_INSERT is set to OFF.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:d6bb9a4e-bf6f-4e54-9406-2b931cedc77c
Error Number:544,State:1,Class:16
2019-07-25 07:01:04,701 ERROR - An exception occurred in the database while saving changes for context type 'Malam.Mastpen.Core.DAL.MastpenBitachonDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert explicit value for identity column in table 'BB_HR_Employee' when IDENTITY_INSERT is set to OFF.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert explicit value for identity column in table 'BB_HR_Employee' when IDENTITY_INSERT is set to OFF.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-25 07:01:04,789 INFO - The PostEmployeeAsync have been retrieved successfully.
2019-07-25 07:01:04,789 INFO - test log
2019-07-25 07:01:04,790 ERROR - There was a critical error on 'PostEmployeeAsync':   Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert explicit value for identity column in table 'BB_HR_Employee' when IDENTITY_INSERT is set to OFF.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Malam.Mastpen.Core.BL.Services.EmployeeService.CreateEmployeeAsync(Employee employee) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.Core\BL\Services\EmployeeService.cs:line 86
   at Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync(EmployeeRequest request) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.API\Controllers\EmployeeController.cs:line 154
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextExceptionFilterAsync()
2019-07-25 07:01:04,793 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.PagedResponse`1[[Malam.Mastpen.Core.DAL.Entities.Employee, Malam.Mastpen.HR.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2019-07-25 07:01:04,800 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API) in 9280.4301ms
2019-07-25 07:01:04,829 INFO - Request finished in 9325.9431ms 200 application/json; charset=utf-8
2019-07-25 07:02:28,993 INFO - Request starting HTTP/1.1 POST http://localhost:59821/api/v1/Employee/Employee application/json-patch+json 162967
2019-07-25 07:02:28,998 INFO - CORS policy execution failed.
2019-07-25 07:02:29,001 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:02:29,005 INFO - Successfully validated the token.
2019-07-25 07:02:29,008 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:02:29,011 INFO - Route matched with {action = "PostEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:02:29,017 INFO - Authorization was successful.
2019-07-25 07:02:30,600 INFO - 'PostEmployeeAsync' has been invoked
2019-07-25 07:02:30,603 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API) with arguments (Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 07:02:31,405 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 07:02:31,480 INFO - Executed DbCommand (70ms) [Parameters=[@__entity_IdentityNumber_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EmployeeID], [item].[Address], [item].[BirthDate], [item].[Citizenship], [item].[dateInsert], [item].[dateUpdate], [item].[FirstName], [item].[FirstNameEN], [item].[GenderID], [item].[IdentificationTypeID], [item].[IdentityNumber], [item].[LastName], [item].[LastNameEN], [item].[OrganizationID], [item].[PassportCountryID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_HR_Employee] AS [item]
WHERE [item].[IdentityNumber] = @__entity_IdentityNumber_0
2019-07-25 07:02:33,352 INFO - Executed DbCommand (70ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 50), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BB_HR_Employee] ([Address], [BirthDate], [Citizenship], [dateInsert], [dateUpdate], [FirstName], [FirstNameEN], [GenderID], [IdentificationTypeID], [IdentityNumber], [LastName], [LastNameEN], [OrganizationID], [PassportCountryID], [userInsert], [UserUpdate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT [EmployeeID], [state]
FROM [BB_HR_Employee]
WHERE @@ROWCOUNT = 1 AND [EmployeeID] = scope_identity();
2019-07-25 07:02:33,591 INFO - Executed DbCommand (70ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EntityTypeID], [item].[dateInsert], [item].[dateUpdate], [item].[EntityTypeName], [item].[state], [item].[TableName], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_EntityType] AS [item]
WHERE [item].[EntityTypeName] = @__tableName_0
2019-07-25 07:06:58,589 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 07:06:58,589 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 07:06:58,661 INFO - Request finished in 94.2691ms 200 
2019-07-25 07:06:58,683 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:06:58,826 INFO - Request finished in 263.2571ms 200 text/html
2019-07-25 07:06:59,040 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 07:06:59,043 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:06:59,432 INFO - Request finished in 393.2195ms 200 application/json;charset=utf-8
2019-07-25 07:07:28,751 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 07:07:28,755 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:07:28,757 INFO - Request finished in 8.0386ms 200 text/html
2019-07-25 07:07:28,934 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 07:07:28,937 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:07:28,958 INFO - Request finished in 25.484ms 200 application/json;charset=utf-8
2019-07-25 07:08:45,736 INFO - Request starting HTTP/1.1 POST http://localhost:59821/api/v1/Employee/Employee application/json-patch+json 162969
2019-07-25 07:08:45,750 INFO - CORS policy execution failed.
2019-07-25 07:08:45,752 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:08:45,757 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:08:45,834 INFO - Route matched with {action = "PostEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:08:45,845 INFO - Authorization failed.
2019-07-25 07:08:45,847 INFO - Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
2019-07-25 07:08:45,852 INFO - Executing ChallengeResult with authentication schemes ().
2019-07-25 07:08:45,939 INFO - AuthenticationScheme: BearerIdentityServerAuthenticationJwt was challenged.
2019-07-25 07:08:45,940 INFO - AuthenticationScheme: Bearer was challenged.
2019-07-25 07:08:45,943 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API) in 106.3056ms
2019-07-25 07:08:45,948 INFO - Request finished in 216.1839ms 401 
2019-07-25 07:08:45,962 INFO - Connection id "0HLOGMM4TVNFN", Request id "0HLOGMM4TVNFN:00000001": the application completed without reading the entire request body.
2019-07-25 07:08:54,876 INFO - Request starting HTTP/1.1 POST http://localhost:59821/api/v1/Employee/Employee application/json-patch+json 162969
2019-07-25 07:08:54,878 INFO - CORS policy execution failed.
2019-07-25 07:08:54,880 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:08:55,416 INFO - Request starting HTTP/1.1 POST http://localhost:59821/api/v1/Employee/Employee application/json-patch+json 162969
2019-07-25 07:08:55,418 INFO - CORS policy execution failed.
2019-07-25 07:08:55,420 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:08:56,638 INFO - Successfully validated the token.
2019-07-25 07:08:56,640 INFO - Successfully validated the token.
2019-07-25 07:08:56,651 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:08:56,652 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:08:56,655 INFO - Route matched with {action = "PostEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:08:56,656 INFO - Route matched with {action = "PostEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:08:56,661 INFO - Authorization was successful.
2019-07-25 07:08:56,662 INFO - Authorization was successful.
2019-07-25 07:09:01,617 INFO - 'PostEmployeeAsync' has been invoked
2019-07-25 07:09:01,617 INFO - 'PostEmployeeAsync' has been invoked
2019-07-25 07:09:01,625 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API) with arguments (Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 07:09:01,626 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PostEmployeeAsync (Malam.Mastpen.HR.API) with arguments (Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 07:09:05,900 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 07:09:05,902 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 07:09:07,051 INFO - Executed DbCommand (88ms) [Parameters=[@__entity_IdentityNumber_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EmployeeID], [item].[Address], [item].[BirthDate], [item].[Citizenship], [item].[dateInsert], [item].[dateUpdate], [item].[FirstName], [item].[FirstNameEN], [item].[GenderID], [item].[IdentificationTypeID], [item].[IdentityNumber], [item].[LastName], [item].[LastNameEN], [item].[OrganizationID], [item].[PassportCountryID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_HR_Employee] AS [item]
WHERE [item].[IdentityNumber] = @__entity_IdentityNumber_0
2019-07-25 07:09:10,617 INFO - Executed DbCommand (74ms) [Parameters=[@__entity_IdentityNumber_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EmployeeID], [item].[Address], [item].[BirthDate], [item].[Citizenship], [item].[dateInsert], [item].[dateUpdate], [item].[FirstName], [item].[FirstNameEN], [item].[GenderID], [item].[IdentificationTypeID], [item].[IdentityNumber], [item].[LastName], [item].[LastNameEN], [item].[OrganizationID], [item].[PassportCountryID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_HR_Employee] AS [item]
WHERE [item].[IdentityNumber] = @__entity_IdentityNumber_0
2019-07-25 07:09:15,477 INFO - Executed DbCommand (71ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 50), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BB_HR_Employee] ([Address], [BirthDate], [Citizenship], [dateInsert], [dateUpdate], [FirstName], [FirstNameEN], [GenderID], [IdentificationTypeID], [IdentityNumber], [LastName], [LastNameEN], [OrganizationID], [PassportCountryID], [userInsert], [UserUpdate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT [EmployeeID], [state]
FROM [BB_HR_Employee]
WHERE @@ROWCOUNT = 1 AND [EmployeeID] = scope_identity();
2019-07-25 07:09:15,479 INFO - Executed DbCommand (75ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 50), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BB_HR_Employee] ([Address], [BirthDate], [Citizenship], [dateInsert], [dateUpdate], [FirstName], [FirstNameEN], [GenderID], [IdentificationTypeID], [IdentityNumber], [LastName], [LastNameEN], [OrganizationID], [PassportCountryID], [userInsert], [UserUpdate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT [EmployeeID], [state]
FROM [BB_HR_Employee]
WHERE @@ROWCOUNT = 1 AND [EmployeeID] = scope_identity();
2019-07-25 07:09:15,733 INFO - Executed DbCommand (70ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EntityTypeID], [item].[dateInsert], [item].[dateUpdate], [item].[EntityTypeName], [item].[state], [item].[TableName], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_EntityType] AS [item]
WHERE [item].[EntityTypeName] = @__tableName_0
2019-07-25 07:09:15,735 INFO - Executed DbCommand (73ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EntityTypeID], [item].[dateInsert], [item].[dateUpdate], [item].[EntityTypeName], [item].[state], [item].[TableName], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_EntityType] AS [item]
WHERE [item].[EntityTypeName] = @__tableName_0
2019-07-25 07:25:27,961 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 07:25:27,961 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 07:25:28,091 INFO - Request finished in 95.9294ms 200 
2019-07-25 07:25:28,164 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:25:28,361 INFO - Request finished in 404.8084ms 200 text/html
2019-07-25 07:25:28,746 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 07:25:28,763 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:25:29,293 INFO - Request finished in 548.5932ms 200 application/json;charset=utf-8
2019-07-25 07:27:28,956 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 07:27:28,959 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:27:28,964 INFO - Request finished in 7.0722ms 200 text/html
2019-07-25 07:27:29,149 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 07:27:29,153 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:27:29,167 INFO - Request finished in 20.1363ms 200 application/json;charset=utf-8
2019-07-25 07:29:19,295 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 641
2019-07-25 07:29:19,299 INFO - CORS policy execution failed.
2019-07-25 07:29:19,302 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:29:19,303 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:29:19,407 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:29:19,419 INFO - Authorization failed.
2019-07-25 07:29:19,420 INFO - Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
2019-07-25 07:29:19,425 INFO - Executing ChallengeResult with authentication schemes ().
2019-07-25 07:29:19,498 INFO - AuthenticationScheme: BearerIdentityServerAuthenticationJwt was challenged.
2019-07-25 07:29:19,500 INFO - AuthenticationScheme: Bearer was challenged.
2019-07-25 07:29:19,502 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 92.701ms
2019-07-25 07:29:19,507 INFO - Request finished in 215.7087ms 401 
2019-07-25 07:29:19,519 INFO - Connection id "0HLOGN0FHCBDP", Request id "0HLOGN0FHCBDP:00000001": the application completed without reading the entire request body.
2019-07-25 07:29:30,725 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 641
2019-07-25 07:29:30,726 INFO - CORS policy execution failed.
2019-07-25 07:29:30,728 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:29:32,442 INFO - Successfully validated the token.
2019-07-25 07:29:32,449 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:29:32,452 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:29:32,454 INFO - Authorization was successful.
2019-07-25 07:30:06,962 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 07:30:42,143 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) with arguments (146, Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 07:30:53,827 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 07:30:54,025 WARN - The Include operation for navigation '[b].IdentificationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 07:30:54,028 WARN - The Include operation for navigation '[b].Organization' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 07:30:54,029 WARN - The Include operation for navigation '[b].EmployeeProffesionType.ProffesionType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 07:30:54,030 WARN - The Include operation for navigation '[b].EmployeeAuthtorization' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 07:30:54,032 WARN - The Include operation for navigation '[b].EmployeeTraining' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 07:30:54,033 WARN - The Include operation for navigation '[b].EmployeeWorkPermit' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 07:30:55,095 INFO - Executed DbCommand (87ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_HR_Employee] AS [b]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
2019-07-25 07:30:55,149 WARN - Query: '(from Employee b in DbSet<Employee> join Docs docsFaceImage in  from Docs a in DbSet<Docs> where [a]...' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-25 07:30:55,499 INFO - Executed DbCommand (78ms) [Parameters=[@__tableName_0='?' (Size = 50), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[EmployeeID], [b].[Address], [b].[BirthDate], [b].[Citizenship], [b].[dateInsert], [b].[dateUpdate], [b].[FirstName], [b].[FirstNameEN], [b].[GenderID], [b].[IdentificationTypeID], [b].[IdentityNumber], [b].[LastName], [b].[LastNameEN], [b].[OrganizationID], [b].[PassportCountryID], [b].[state], [b].[userInsert], [b].[UserUpdate], [b.Organization].[OrganizationID], [b.Organization].[Comment], [b.Organization].[dateInsert], [b.Organization].[dateUpdate], [b.Organization].[OrganizationExpertiseTypeID], [b.Organization].[OrganizationName], [b.Organization].[OrganizationNumber], [b.Organization].[OrganizationParentID], [b.Organization].[OrganizationTypeID], [b.Organization].[state], [b.Organization].[userInsert], [b.Organization].[UserUpdate], [b.IdentificationType].[IdentificationTypeID], [b.IdentificationType].[Comment], [b.IdentificationType].[dateInsert], [b.IdentificationType].[dateUpdate], [b.IdentificationType].[IdentificationTypeName], [b.IdentificationType].[state], [b.IdentificationType].[userInsert], [b.IdentificationType].[UserUpdate], [t].[DocumentID], [t].[dateInsert], [t].[dateUpdate], [t].[DocumentDate], [t].[DocumentPath], [t].[DocumentTypeID], [t].[EntityID], [t].[EntityTypeID], [t].[IsDocumentSigned], [t].[LanguageID], [t].[state], [t].[userInsert], [t].[UserUpdate], [t].[ValIdDate]
FROM [BB_HR_Employee] AS [b]
LEFT JOIN [BB_GEN_Organization] AS [b.Organization] ON [b].[OrganizationID] = [b.Organization].[OrganizationID]
LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType] ON [b].[IdentificationTypeID] = [b.IdentificationType].[IdentificationTypeID]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
ORDER BY [b].[EmployeeID]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2019-07-25 07:30:55,813 INFO - Executed DbCommand (80ms) [Parameters=[@__tableName_0='?' (Size = 50), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeProffesionType].[EmployeeAuthorizationID], [b.EmployeeProffesionType].[Comment], [b.EmployeeProffesionType].[dateInsert], [b.EmployeeProffesionType].[dateUpdate], [b.EmployeeProffesionType].[EmployeeID], [b.EmployeeProffesionType].[ProffesionTypeID], [b.EmployeeProffesionType].[state], [b.EmployeeProffesionType].[userInsert], [b.EmployeeProffesionType].[UserUpdate], [e.ProffesionType].[ProffesionTypeID], [e.ProffesionType].[Comment], [e.ProffesionType].[dateInsert], [e.ProffesionType].[dateUpdate], [e.ProffesionType].[ProffesionTypeName], [e.ProffesionType].[state], [e.ProffesionType].[userInsert], [e.ProffesionType].[UserUpdate]
FROM [BB_HR_EmployeeProffesionType] AS [b.EmployeeProffesionType]
LEFT JOIN [BB_HR_ProffesionType] AS [e.ProffesionType] ON [b.EmployeeProffesionType].[ProffesionTypeID] = [e.ProffesionType].[ProffesionTypeID]
INNER JOIN (
    SELECT DISTINCT [t1].*
    FROM (
        SELECT [b0].[EmployeeID]
        FROM [BB_HR_Employee] AS [b0]
        LEFT JOIN [BB_GEN_Organization] AS [b.Organization0] ON [b0].[OrganizationID] = [b.Organization0].[OrganizationID]
        LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType0] ON [b0].[IdentificationTypeID] = [b.IdentificationType0].[IdentificationTypeID]
        LEFT JOIN (
            SELECT [a0].*
            FROM [BB_GEN_Docs] AS [a0]
            WHERE ([a0].[EntityTypeID] = (
                SELECT TOP(1) [item0].[EntityTypeID]
                FROM [BB_GEN_EntityType] AS [item0]
                WHERE [item0].[EntityTypeName] = @__tableName_0
            )) AND ([a0].[DocumentTypeID] = 7)
        ) AS [t0] ON [b0].[EmployeeID] = [t0].[EntityID]
        ORDER BY [b0].[EmployeeID]
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
    ) AS [t1]
) AS [t2] ON [b.EmployeeProffesionType].[EmployeeID] = [t2].[EmployeeID]
ORDER BY [t2].[EmployeeID]
2019-07-25 07:30:55,934 INFO - Executed DbCommand (74ms) [Parameters=[@__tableName_0='?' (Size = 50), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeAuthtorization].[EmployeeAuthorizationID], [b.EmployeeAuthtorization].[AuthorizationTypeID], [b.EmployeeAuthtorization].[Comment], [b.EmployeeAuthtorization].[DateFrom], [b.EmployeeAuthtorization].[dateInsert], [b.EmployeeAuthtorization].[DateTo], [b.EmployeeAuthtorization].[dateUpdate], [b.EmployeeAuthtorization].[EmployeeAuthorizationName], [b.EmployeeAuthtorization].[EmployeeID], [b.EmployeeAuthtorization].[SiteId], [b.EmployeeAuthtorization].[state], [b.EmployeeAuthtorization].[userInsert], [b.EmployeeAuthtorization].[UserUpdate]
FROM [BB_HR_EmployeeAuthtorization] AS [b.EmployeeAuthtorization]
INNER JOIN (
    SELECT DISTINCT [t4].*
    FROM (
        SELECT [b1].[EmployeeID]
        FROM [BB_HR_Employee] AS [b1]
        LEFT JOIN [BB_GEN_Organization] AS [b.Organization1] ON [b1].[OrganizationID] = [b.Organization1].[OrganizationID]
        LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType1] ON [b1].[IdentificationTypeID] = [b.IdentificationType1].[IdentificationTypeID]
        LEFT JOIN (
            SELECT [a1].*
            FROM [BB_GEN_Docs] AS [a1]
            WHERE ([a1].[EntityTypeID] = (
                SELECT TOP(1) [item1].[EntityTypeID]
                FROM [BB_GEN_EntityType] AS [item1]
                WHERE [item1].[EntityTypeName] = @__tableName_0
            )) AND ([a1].[DocumentTypeID] = 7)
        ) AS [t3] ON [b1].[EmployeeID] = [t3].[EntityID]
        ORDER BY [b1].[EmployeeID]
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
    ) AS [t4]
) AS [t5] ON [b.EmployeeAuthtorization].[EmployeeID] = [t5].[EmployeeID]
ORDER BY [t5].[EmployeeID]
2019-07-25 07:30:56,022 INFO - Executed DbCommand (71ms) [Parameters=[@__tableName_0='?' (Size = 50), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeTraining].[EmployeeTrainingID], [b.EmployeeTraining].[Comment], [b.EmployeeTraining].[DateFrom], [b.EmployeeTraining].[dateInsert], [b.EmployeeTraining].[DateTo], [b.EmployeeTraining].[dateUpdate], [b.EmployeeTraining].[EmployeeID], [b.EmployeeTraining].[EmployeeTrainingName], [b.EmployeeTraining].[SiteID], [b.EmployeeTraining].[state], [b.EmployeeTraining].[TrainingTypeID], [b.EmployeeTraining].[userInsert], [b.EmployeeTraining].[UserUpdate]
FROM [BB_HR_EmployeeTraining] AS [b.EmployeeTraining]
INNER JOIN (
    SELECT DISTINCT [t7].*
    FROM (
        SELECT [b2].[EmployeeID]
        FROM [BB_HR_Employee] AS [b2]
        LEFT JOIN [BB_GEN_Organization] AS [b.Organization2] ON [b2].[OrganizationID] = [b.Organization2].[OrganizationID]
        LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType2] ON [b2].[IdentificationTypeID] = [b.IdentificationType2].[IdentificationTypeID]
        LEFT JOIN (
            SELECT [a2].*
            FROM [BB_GEN_Docs] AS [a2]
            WHERE ([a2].[EntityTypeID] = (
                SELECT TOP(1) [item2].[EntityTypeID]
                FROM [BB_GEN_EntityType] AS [item2]
                WHERE [item2].[EntityTypeName] = @__tableName_0
            )) AND ([a2].[DocumentTypeID] = 7)
        ) AS [t6] ON [b2].[EmployeeID] = [t6].[EntityID]
        ORDER BY [b2].[EmployeeID]
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
    ) AS [t7]
) AS [t8] ON [b.EmployeeTraining].[EmployeeID] = [t8].[EmployeeID]
ORDER BY [t8].[EmployeeID]
2019-07-25 07:30:56,131 INFO - Executed DbCommand (92ms) [Parameters=[@__tableName_0='?' (Size = 50), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeWorkPermit].[EmployeeWorkPermitID], [b.EmployeeWorkPermit].[Comment], [b.EmployeeWorkPermit].[DateFrom], [b.EmployeeWorkPermit].[dateInsert], [b.EmployeeWorkPermit].[DateTo], [b.EmployeeWorkPermit].[dateUpdate], [b.EmployeeWorkPermit].[EmployeeID], [b.EmployeeWorkPermit].[EmployeeWorkPermitName], [b.EmployeeWorkPermit].[IsRequired], [b.EmployeeWorkPermit].[SiteID], [b.EmployeeWorkPermit].[state], [b.EmployeeWorkPermit].[userInsert], [b.EmployeeWorkPermit].[UserUpdate]
FROM [BB_HR_EmployeeWorkPermit] AS [b.EmployeeWorkPermit]
INNER JOIN (
    SELECT DISTINCT [t10].*
    FROM (
        SELECT [b3].[EmployeeID]
        FROM [BB_HR_Employee] AS [b3]
        LEFT JOIN [BB_GEN_Organization] AS [b.Organization3] ON [b3].[OrganizationID] = [b.Organization3].[OrganizationID]
        LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType3] ON [b3].[IdentificationTypeID] = [b.IdentificationType3].[IdentificationTypeID]
        LEFT JOIN (
            SELECT [a3].*
            FROM [BB_GEN_Docs] AS [a3]
            WHERE ([a3].[EntityTypeID] = (
                SELECT TOP(1) [item3].[EntityTypeID]
                FROM [BB_GEN_EntityType] AS [item3]
                WHERE [item3].[EntityTypeName] = @__tableName_0
            )) AND ([a3].[DocumentTypeID] = 7)
        ) AS [t9] ON [b3].[EmployeeID] = [t9].[EntityID]
        ORDER BY [b3].[EmployeeID]
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
    ) AS [t10]
) AS [t11] ON [b.EmployeeWorkPermit].[EmployeeID] = [t11].[EmployeeID]
ORDER BY [t11].[EmployeeID]
2019-07-25 07:31:17,705 INFO - Executed DbCommand (70ms) [Parameters=[@__employee_EmployeeId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EmployeeID], [item].[Address], [item].[BirthDate], [item].[Citizenship], [item].[dateInsert], [item].[dateUpdate], [item].[FirstName], [item].[FirstNameEN], [item].[GenderID], [item].[IdentificationTypeID], [item].[IdentityNumber], [item].[LastName], [item].[LastNameEN], [item].[OrganizationID], [item].[PassportCountryID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_HR_Employee] AS [item]
WHERE [item].[EmployeeID] = @__employee_EmployeeId_0
2019-07-25 07:33:55,940 ERROR - Failed executing DbCommand (75ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 50), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [BB_HR_Employee] SET [Address] = @p0, [BirthDate] = @p1, [Citizenship] = @p2, [dateInsert] = @p3, [dateUpdate] = @p4, [FirstName] = @p5, [FirstNameEN] = @p6, [GenderID] = @p7, [IdentificationTypeID] = @p8, [IdentityNumber] = @p9, [LastName] = @p10, [LastNameEN] = @p11, [OrganizationID] = @p12, [PassportCountryID] = @p13, [state] = @p14, [userInsert] = @p15, [UserUpdate] = @p16
WHERE [EmployeeID] = @p17;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:f1d13e65-35b1-4a7d-92a9-92d97f86ee43
Error Number:547,State:0,Class:16
2019-07-25 07:33:56,061 ERROR - An exception occurred in the database while saving changes for context type 'Malam.Mastpen.Core.DAL.MastpenBitachonDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-25 07:33:56,152 INFO - The PutEmployeeAsync have been retrieved successfully.
2019-07-25 07:33:56,157 INFO - test log
2019-07-25 07:33:56,175 ERROR - There was a critical error on 'PutEmployeeAsync':   Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Malam.Mastpen.Core.BL.Services.EmployeeService.UpdateEmployeeAsync(Employee employee) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.Core\BL\Services\EmployeeService.cs:line 171
   at Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync(Int32 Id, EmployeeRequest request) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.API\Controllers\EmployeeController.cs:line 256
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextExceptionFilterAsync()
2019-07-25 07:33:56,181 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.PagedResponse`1[[Malam.Mastpen.Core.DAL.Entities.Employee, Malam.Mastpen.HR.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2019-07-25 07:33:56,195 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 263741.0268ms
2019-07-25 07:33:56,211 INFO - Request finished in 265482.5301ms 200 application/json; charset=utf-8
2019-07-25 07:33:57,976 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 641
2019-07-25 07:33:57,977 INFO - CORS policy execution failed.
2019-07-25 07:33:57,979 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:33:57,981 INFO - Successfully validated the token.
2019-07-25 07:33:57,983 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:33:57,987 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:33:57,989 INFO - Authorization was successful.
2019-07-25 07:41:36,990 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 07:41:36,990 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 07:41:37,029 INFO - Request finished in 44.1271ms 200 
2019-07-25 07:41:37,054 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:41:37,253 INFO - Request finished in 269.0094ms 200 text/html
2019-07-25 07:41:37,520 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 07:41:37,523 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:41:37,953 INFO - Request finished in 417.2841ms 200 application/json;charset=utf-8
2019-07-25 07:41:46,835 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 07:41:46,840 INFO - CORS policy execution failed.
2019-07-25 07:41:46,843 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:41:46,845 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:41:46,942 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:41:46,957 INFO - Authorization failed.
2019-07-25 07:41:46,959 INFO - Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
2019-07-25 07:41:46,963 INFO - Executing ChallengeResult with authentication schemes ().
2019-07-25 07:41:47,054 INFO - AuthenticationScheme: BearerIdentityServerAuthenticationJwt was challenged.
2019-07-25 07:41:47,056 INFO - AuthenticationScheme: Bearer was challenged.
2019-07-25 07:41:47,059 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 114.4481ms
2019-07-25 07:41:47,062 INFO - Request finished in 226.6469ms 401 
2019-07-25 07:41:47,076 INFO - Connection id "0HLOGN9GBA6O5", Request id "0HLOGN9GBA6O5:00000002": the application completed without reading the entire request body.
2019-07-25 07:41:54,870 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 07:41:54,872 INFO - CORS policy execution failed.
2019-07-25 07:41:54,873 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:41:56,654 INFO - Successfully validated the token.
2019-07-25 07:41:56,660 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:41:56,664 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:41:56,666 INFO - Authorization was successful.
2019-07-25 07:42:01,407 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 07:43:00,601 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 07:43:00,601 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 07:43:00,650 INFO - Request finished in 51.8933ms 200 
2019-07-25 07:43:00,674 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:43:00,828 INFO - Request finished in 232.3392ms 200 text/html
2019-07-25 07:43:01,067 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 07:43:01,099 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:43:01,545 INFO - Request finished in 478.6138ms 200 application/json;charset=utf-8
2019-07-25 07:43:06,641 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 07:43:06,645 INFO - CORS policy execution failed.
2019-07-25 07:43:06,649 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:43:06,652 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:43:06,731 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:43:06,746 INFO - Authorization failed.
2019-07-25 07:43:06,748 INFO - Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
2019-07-25 07:43:06,752 INFO - Executing ChallengeResult with authentication schemes ().
2019-07-25 07:43:06,829 INFO - AuthenticationScheme: BearerIdentityServerAuthenticationJwt was challenged.
2019-07-25 07:43:06,831 INFO - AuthenticationScheme: Bearer was challenged.
2019-07-25 07:43:06,835 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 99.6678ms
2019-07-25 07:43:06,838 INFO - Request finished in 196.2976ms 401 
2019-07-25 07:43:06,850 INFO - Connection id "0HLOGNA98LCIT", Request id "0HLOGNA98LCIT:00000002": the application completed without reading the entire request body.
2019-07-25 07:43:12,997 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 07:43:12,998 INFO - CORS policy execution failed.
2019-07-25 07:43:13,000 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:43:14,603 INFO - Successfully validated the token.
2019-07-25 07:43:14,610 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:43:14,613 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:43:14,614 INFO - Authorization was successful.
2019-07-25 07:43:17,933 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 07:44:02,096 INFO - test log
2019-07-25 07:44:02,141 ERROR - There was a critical error on 'PutEmployeeAsync':   System.NullReferenceException: Object reference not set to an instance of an object.
   at Malam.Mastpen.API.Filters.MastpenActionFilter.OnActionExecuting(ActionExecutingContext context) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.API\Filters\MastpenActionFilter.cs:line 42
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextExceptionFilterAsync()
2019-07-25 07:44:02,149 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.PagedResponse`1[[Malam.Mastpen.Core.DAL.Entities.Employee, Malam.Mastpen.HR.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2019-07-25 07:44:02,159 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 47545.5577ms
2019-07-25 07:44:02,167 INFO - Request finished in 49170.8379ms 200 application/json; charset=utf-8
2019-07-25 07:44:04,464 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 07:44:04,466 INFO - CORS policy execution failed.
2019-07-25 07:44:04,467 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:44:04,474 INFO - Successfully validated the token.
2019-07-25 07:44:04,476 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:44:04,479 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:44:04,481 INFO - Authorization was successful.
2019-07-25 07:44:24,102 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 07:48:34,076 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 07:48:34,076 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 07:48:34,125 INFO - Request finished in 53.6736ms 200 
2019-07-25 07:48:34,156 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:48:34,330 INFO - Request finished in 262.8549ms 200 text/html
2019-07-25 07:48:34,591 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 07:48:34,600 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:48:35,032 INFO - Request finished in 437.6338ms 200 application/json;charset=utf-8
2019-07-25 07:48:47,854 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 07:48:47,860 INFO - CORS policy execution failed.
2019-07-25 07:48:47,862 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:48:49,468 INFO - Successfully validated the token.
2019-07-25 07:48:49,473 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:48:49,563 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:48:49,575 INFO - Authorization was successful.
2019-07-25 07:48:54,145 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 07:54:54,402 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 07:54:54,402 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 07:54:54,467 INFO - Request finished in 67.4163ms 200 
2019-07-25 07:54:54,485 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:54:54,605 INFO - Request finished in 206.5625ms 200 text/html
2019-07-25 07:54:56,741 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 07:54:56,744 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:54:57,089 INFO - Request finished in 343.5668ms 200 application/json;charset=utf-8
2019-07-25 07:55:31,274 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 07:55:31,274 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 07:55:31,325 INFO - Request finished in 58.1989ms 200 
2019-07-25 07:55:31,360 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:55:31,501 INFO - Request finished in 231.1493ms 200 text/html
2019-07-25 07:55:31,729 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 07:55:31,733 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:55:32,106 INFO - Request finished in 377.4695ms 200 application/json;charset=utf-8
2019-07-25 07:55:38,513 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 07:55:38,517 INFO - CORS policy execution failed.
2019-07-25 07:55:38,521 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:55:38,524 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 07:55:38,612 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:55:38,624 INFO - Authorization failed.
2019-07-25 07:55:38,625 INFO - Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
2019-07-25 07:55:38,629 INFO - Executing ChallengeResult with authentication schemes ().
2019-07-25 07:55:38,702 INFO - AuthenticationScheme: BearerIdentityServerAuthenticationJwt was challenged.
2019-07-25 07:55:38,703 INFO - AuthenticationScheme: Bearer was challenged.
2019-07-25 07:55:38,708 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 90.4554ms
2019-07-25 07:55:38,710 INFO - Request finished in 198.1168ms 401 
2019-07-25 07:55:38,724 INFO - Connection id "0HLOGNH8VNSP9", Request id "0HLOGNH8VNSP9:00000002": the application completed without reading the entire request body.
2019-07-25 07:55:47,493 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 07:55:47,495 INFO - CORS policy execution failed.
2019-07-25 07:55:47,497 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 07:55:49,278 INFO - Successfully validated the token.
2019-07-25 07:55:49,284 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 07:55:49,287 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 07:55:49,289 INFO - Authorization was successful.
2019-07-25 07:55:55,228 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 07:56:52,042 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:03:44,636 INFO - test log
2019-07-25 08:03:44,637 ERROR - There was a critical error on 'PutEmployeeAsync':   System.NullReferenceException: Object reference not set to an instance of an object.
   at Malam.Mastpen.API.Filters.MastpenActionFilter.OnActionExecuting(ActionExecutingContext context) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.API\Filters\MastpenActionFilter.cs:line 42
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextExceptionFilterAsync()
2019-07-25 08:03:44,642 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.PagedResponse`1[[Malam.Mastpen.Core.DAL.Entities.Employee, Malam.Mastpen.HR.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2019-07-25 08:03:44,658 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 475365.1102ms
2019-07-25 08:03:44,671 INFO - Request finished in 477171.9762ms 200 application/json; charset=utf-8
2019-07-25 08:03:47,155 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 08:03:47,157 INFO - CORS policy execution failed.
2019-07-25 08:03:47,159 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:03:47,163 INFO - Successfully validated the token.
2019-07-25 08:03:47,166 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:03:47,169 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 08:03:47,173 INFO - Authorization was successful.
2019-07-25 08:04:19,538 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 08:09:07,185 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:09:07,185 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:09:07,233 INFO - Request finished in 53.0674ms 200 
2019-07-25 08:09:07,266 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:09:07,432 INFO - Request finished in 253.4873ms 200 text/html
2019-07-25 08:09:07,728 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:09:07,731 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:09:08,107 INFO - Request finished in 375.3944ms 200 application/json;charset=utf-8
2019-07-25 08:09:22,033 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 08:09:22,038 INFO - CORS policy execution failed.
2019-07-25 08:09:22,041 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:09:23,839 INFO - Successfully validated the token.
2019-07-25 08:09:23,847 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:09:23,935 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 08:09:23,949 INFO - Authorization was successful.
2019-07-25 08:09:29,681 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 08:09:31,472 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) with arguments (146, Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 08:09:35,765 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:09:35,954 WARN - The Include operation for navigation '[b].IdentificationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:09:35,956 WARN - The Include operation for navigation '[b].Organization' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:09:35,957 WARN - The Include operation for navigation '[b].EmployeeProffesionType.ProffesionType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:09:35,966 WARN - The Include operation for navigation '[b].EmployeeAuthtorization' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:09:35,970 WARN - The Include operation for navigation '[b].EmployeeTraining' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:09:35,972 WARN - The Include operation for navigation '[b].EmployeeWorkPermit' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:09:36,962 INFO - Executed DbCommand (95ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_HR_Employee] AS [b]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
2019-07-25 08:09:37,355 INFO - Executed DbCommand (77ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b].[EmployeeID], [b].[Address], [b].[BirthDate], [b].[Citizenship], [b].[dateInsert], [b].[dateUpdate], [b].[FirstName], [b].[FirstNameEN], [b].[GenderID], [b].[IdentificationTypeID], [b].[IdentityNumber], [b].[LastName], [b].[LastNameEN], [b].[OrganizationID], [b].[PassportCountryID], [b].[state], [b].[userInsert], [b].[UserUpdate], [b.Organization].[OrganizationID], [b.Organization].[Comment], [b.Organization].[dateInsert], [b.Organization].[dateUpdate], [b.Organization].[OrganizationExpertiseTypeID], [b.Organization].[OrganizationName], [b.Organization].[OrganizationNumber], [b.Organization].[OrganizationParentID], [b.Organization].[OrganizationTypeID], [b.Organization].[state], [b.Organization].[userInsert], [b.Organization].[UserUpdate], [b.IdentificationType].[IdentificationTypeID], [b.IdentificationType].[Comment], [b.IdentificationType].[dateInsert], [b.IdentificationType].[dateUpdate], [b.IdentificationType].[IdentificationTypeName], [b.IdentificationType].[state], [b.IdentificationType].[userInsert], [b.IdentificationType].[UserUpdate], [t].[DocumentID], [t].[dateInsert], [t].[dateUpdate], [t].[DocumentDate], [t].[DocumentPath], [t].[DocumentTypeID], [t].[EntityID], [t].[EntityTypeID], [t].[IsDocumentSigned], [t].[LanguageID], [t].[state], [t].[userInsert], [t].[UserUpdate], [t].[ValIdDate]
FROM [BB_HR_Employee] AS [b]
LEFT JOIN [BB_GEN_Organization] AS [b.Organization] ON [b].[OrganizationID] = [b.Organization].[OrganizationID]
LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType] ON [b].[IdentificationTypeID] = [b.IdentificationType].[IdentificationTypeID]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
ORDER BY [b].[EmployeeID]
2019-07-25 08:09:37,700 INFO - Executed DbCommand (80ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeProffesionType].[EmployeeAuthorizationID], [b.EmployeeProffesionType].[Comment], [b.EmployeeProffesionType].[dateInsert], [b.EmployeeProffesionType].[dateUpdate], [b.EmployeeProffesionType].[EmployeeID], [b.EmployeeProffesionType].[ProffesionTypeID], [b.EmployeeProffesionType].[state], [b.EmployeeProffesionType].[userInsert], [b.EmployeeProffesionType].[UserUpdate], [e.ProffesionType].[ProffesionTypeID], [e.ProffesionType].[Comment], [e.ProffesionType].[dateInsert], [e.ProffesionType].[dateUpdate], [e.ProffesionType].[ProffesionTypeName], [e.ProffesionType].[state], [e.ProffesionType].[userInsert], [e.ProffesionType].[UserUpdate]
FROM [BB_HR_EmployeeProffesionType] AS [b.EmployeeProffesionType]
LEFT JOIN [BB_HR_ProffesionType] AS [e.ProffesionType] ON [b.EmployeeProffesionType].[ProffesionTypeID] = [e.ProffesionType].[ProffesionTypeID]
INNER JOIN (
    SELECT DISTINCT [b0].[EmployeeID]
    FROM [BB_HR_Employee] AS [b0]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization0] ON [b0].[OrganizationID] = [b.Organization0].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType0] ON [b0].[IdentificationTypeID] = [b.IdentificationType0].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a0].*
        FROM [BB_GEN_Docs] AS [a0]
        WHERE ([a0].[EntityTypeID] = (
            SELECT TOP(1) [item0].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item0]
            WHERE [item0].[EntityTypeName] = @__tableName_0
        )) AND ([a0].[DocumentTypeID] = 7)
    ) AS [t0] ON [b0].[EmployeeID] = [t0].[EntityID]
) AS [t1] ON [b.EmployeeProffesionType].[EmployeeID] = [t1].[EmployeeID]
ORDER BY [t1].[EmployeeID]
2019-07-25 08:09:37,877 INFO - Executed DbCommand (130ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeAuthtorization].[EmployeeAuthorizationID], [b.EmployeeAuthtorization].[AuthorizationTypeID], [b.EmployeeAuthtorization].[Comment], [b.EmployeeAuthtorization].[DateFrom], [b.EmployeeAuthtorization].[dateInsert], [b.EmployeeAuthtorization].[DateTo], [b.EmployeeAuthtorization].[dateUpdate], [b.EmployeeAuthtorization].[EmployeeAuthorizationName], [b.EmployeeAuthtorization].[EmployeeID], [b.EmployeeAuthtorization].[SiteId], [b.EmployeeAuthtorization].[state], [b.EmployeeAuthtorization].[userInsert], [b.EmployeeAuthtorization].[UserUpdate]
FROM [BB_HR_EmployeeAuthtorization] AS [b.EmployeeAuthtorization]
INNER JOIN (
    SELECT DISTINCT [b1].[EmployeeID]
    FROM [BB_HR_Employee] AS [b1]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization1] ON [b1].[OrganizationID] = [b.Organization1].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType1] ON [b1].[IdentificationTypeID] = [b.IdentificationType1].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a1].*
        FROM [BB_GEN_Docs] AS [a1]
        WHERE ([a1].[EntityTypeID] = (
            SELECT TOP(1) [item1].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item1]
            WHERE [item1].[EntityTypeName] = @__tableName_0
        )) AND ([a1].[DocumentTypeID] = 7)
    ) AS [t2] ON [b1].[EmployeeID] = [t2].[EntityID]
) AS [t3] ON [b.EmployeeAuthtorization].[EmployeeID] = [t3].[EmployeeID]
ORDER BY [t3].[EmployeeID]
2019-07-25 08:09:37,980 INFO - Executed DbCommand (78ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeTraining].[EmployeeTrainingID], [b.EmployeeTraining].[Comment], [b.EmployeeTraining].[DateFrom], [b.EmployeeTraining].[dateInsert], [b.EmployeeTraining].[DateTo], [b.EmployeeTraining].[dateUpdate], [b.EmployeeTraining].[EmployeeID], [b.EmployeeTraining].[EmployeeTrainingName], [b.EmployeeTraining].[SiteID], [b.EmployeeTraining].[state], [b.EmployeeTraining].[TrainingTypeID], [b.EmployeeTraining].[userInsert], [b.EmployeeTraining].[UserUpdate]
FROM [BB_HR_EmployeeTraining] AS [b.EmployeeTraining]
INNER JOIN (
    SELECT DISTINCT [b2].[EmployeeID]
    FROM [BB_HR_Employee] AS [b2]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization2] ON [b2].[OrganizationID] = [b.Organization2].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType2] ON [b2].[IdentificationTypeID] = [b.IdentificationType2].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a2].*
        FROM [BB_GEN_Docs] AS [a2]
        WHERE ([a2].[EntityTypeID] = (
            SELECT TOP(1) [item2].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item2]
            WHERE [item2].[EntityTypeName] = @__tableName_0
        )) AND ([a2].[DocumentTypeID] = 7)
    ) AS [t4] ON [b2].[EmployeeID] = [t4].[EntityID]
) AS [t5] ON [b.EmployeeTraining].[EmployeeID] = [t5].[EmployeeID]
ORDER BY [t5].[EmployeeID]
2019-07-25 08:09:38,077 INFO - Executed DbCommand (80ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeWorkPermit].[EmployeeWorkPermitID], [b.EmployeeWorkPermit].[Comment], [b.EmployeeWorkPermit].[DateFrom], [b.EmployeeWorkPermit].[dateInsert], [b.EmployeeWorkPermit].[DateTo], [b.EmployeeWorkPermit].[dateUpdate], [b.EmployeeWorkPermit].[EmployeeID], [b.EmployeeWorkPermit].[EmployeeWorkPermitName], [b.EmployeeWorkPermit].[IsRequired], [b.EmployeeWorkPermit].[SiteID], [b.EmployeeWorkPermit].[state], [b.EmployeeWorkPermit].[userInsert], [b.EmployeeWorkPermit].[UserUpdate]
FROM [BB_HR_EmployeeWorkPermit] AS [b.EmployeeWorkPermit]
INNER JOIN (
    SELECT DISTINCT [b3].[EmployeeID]
    FROM [BB_HR_Employee] AS [b3]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization3] ON [b3].[OrganizationID] = [b.Organization3].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType3] ON [b3].[IdentificationTypeID] = [b.IdentificationType3].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a3].*
        FROM [BB_GEN_Docs] AS [a3]
        WHERE ([a3].[EntityTypeID] = (
            SELECT TOP(1) [item3].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item3]
            WHERE [item3].[EntityTypeName] = @__tableName_0
        )) AND ([a3].[DocumentTypeID] = 7)
    ) AS [t6] ON [b3].[EmployeeID] = [t6].[EntityID]
) AS [t7] ON [b.EmployeeWorkPermit].[EmployeeID] = [t7].[EmployeeID]
ORDER BY [t7].[EmployeeID]
2019-07-25 08:09:46,385 INFO - Executed DbCommand (74ms) [Parameters=[@__employee_EmployeeId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EmployeeID], [item].[Address], [item].[BirthDate], [item].[Citizenship], [item].[dateInsert], [item].[dateUpdate], [item].[FirstName], [item].[FirstNameEN], [item].[GenderID], [item].[IdentificationTypeID], [item].[IdentityNumber], [item].[LastName], [item].[LastNameEN], [item].[OrganizationID], [item].[PassportCountryID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_HR_Employee] AS [item]
WHERE [item].[EmployeeID] = @__employee_EmployeeId_0
2019-07-25 08:09:48,063 ERROR - Failed executing DbCommand (76ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 50), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [BB_HR_Employee] SET [Address] = @p0, [BirthDate] = @p1, [Citizenship] = @p2, [dateInsert] = @p3, [dateUpdate] = @p4, [FirstName] = @p5, [FirstNameEN] = @p6, [GenderID] = @p7, [IdentificationTypeID] = @p8, [IdentityNumber] = @p9, [LastName] = @p10, [LastNameEN] = @p11, [OrganizationID] = @p12, [PassportCountryID] = @p13, [state] = @p14, [userInsert] = @p15, [UserUpdate] = @p16
WHERE [EmployeeID] = @p17;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:e2364a6f-e18f-4a3e-bcea-c59332df2979
Error Number:547,State:0,Class:16
2019-07-25 08:09:48,174 ERROR - An exception occurred in the database while saving changes for context type 'Malam.Mastpen.Core.DAL.MastpenBitachonDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-25 08:09:48,267 INFO - The PutEmployeeAsync have been retrieved successfully.
2019-07-25 08:09:48,273 INFO - test log
2019-07-25 08:09:48,301 ERROR - There was a critical error on 'PutEmployeeAsync':   Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Malam.Mastpen.Core.BL.Services.EmployeeService.UpdateEmployeeAsync(Employee employee) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.Core\BL\Services\EmployeeService.cs:line 172
   at Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync(Int32 Id, EmployeeRequest request) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.API\Controllers\EmployeeController.cs:line 258
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextExceptionFilterAsync()
2019-07-25 08:09:48,312 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.PagedResponse`1[[Malam.Mastpen.Core.DAL.Entities.Employee, Malam.Mastpen.HR.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2019-07-25 08:09:48,327 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 24388.4706ms
2019-07-25 08:09:48,358 INFO - Request finished in 26313.684ms 200 application/json; charset=utf-8
2019-07-25 08:09:59,713 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 08:09:59,715 INFO - CORS policy execution failed.
2019-07-25 08:09:59,717 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:09:59,720 INFO - Successfully validated the token.
2019-07-25 08:09:59,726 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:09:59,729 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 08:09:59,733 INFO - Authorization was successful.
2019-07-25 08:10:05,898 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 08:10:08,760 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) with arguments (146, Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 08:10:14,500 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:10:14,587 INFO - Executed DbCommand (78ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_HR_Employee] AS [b]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
2019-07-25 08:10:14,667 INFO - Executed DbCommand (77ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b].[EmployeeID], [b].[Address], [b].[BirthDate], [b].[Citizenship], [b].[dateInsert], [b].[dateUpdate], [b].[FirstName], [b].[FirstNameEN], [b].[GenderID], [b].[IdentificationTypeID], [b].[IdentityNumber], [b].[LastName], [b].[LastNameEN], [b].[OrganizationID], [b].[PassportCountryID], [b].[state], [b].[userInsert], [b].[UserUpdate], [b.Organization].[OrganizationID], [b.Organization].[Comment], [b.Organization].[dateInsert], [b.Organization].[dateUpdate], [b.Organization].[OrganizationExpertiseTypeID], [b.Organization].[OrganizationName], [b.Organization].[OrganizationNumber], [b.Organization].[OrganizationParentID], [b.Organization].[OrganizationTypeID], [b.Organization].[state], [b.Organization].[userInsert], [b.Organization].[UserUpdate], [b.IdentificationType].[IdentificationTypeID], [b.IdentificationType].[Comment], [b.IdentificationType].[dateInsert], [b.IdentificationType].[dateUpdate], [b.IdentificationType].[IdentificationTypeName], [b.IdentificationType].[state], [b.IdentificationType].[userInsert], [b.IdentificationType].[UserUpdate], [t].[DocumentID], [t].[dateInsert], [t].[dateUpdate], [t].[DocumentDate], [t].[DocumentPath], [t].[DocumentTypeID], [t].[EntityID], [t].[EntityTypeID], [t].[IsDocumentSigned], [t].[LanguageID], [t].[state], [t].[userInsert], [t].[UserUpdate], [t].[ValIdDate]
FROM [BB_HR_Employee] AS [b]
LEFT JOIN [BB_GEN_Organization] AS [b.Organization] ON [b].[OrganizationID] = [b.Organization].[OrganizationID]
LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType] ON [b].[IdentificationTypeID] = [b.IdentificationType].[IdentificationTypeID]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
ORDER BY [b].[EmployeeID]
2019-07-25 08:10:14,748 INFO - Executed DbCommand (75ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeProffesionType].[EmployeeAuthorizationID], [b.EmployeeProffesionType].[Comment], [b.EmployeeProffesionType].[dateInsert], [b.EmployeeProffesionType].[dateUpdate], [b.EmployeeProffesionType].[EmployeeID], [b.EmployeeProffesionType].[ProffesionTypeID], [b.EmployeeProffesionType].[state], [b.EmployeeProffesionType].[userInsert], [b.EmployeeProffesionType].[UserUpdate], [e.ProffesionType].[ProffesionTypeID], [e.ProffesionType].[Comment], [e.ProffesionType].[dateInsert], [e.ProffesionType].[dateUpdate], [e.ProffesionType].[ProffesionTypeName], [e.ProffesionType].[state], [e.ProffesionType].[userInsert], [e.ProffesionType].[UserUpdate]
FROM [BB_HR_EmployeeProffesionType] AS [b.EmployeeProffesionType]
LEFT JOIN [BB_HR_ProffesionType] AS [e.ProffesionType] ON [b.EmployeeProffesionType].[ProffesionTypeID] = [e.ProffesionType].[ProffesionTypeID]
INNER JOIN (
    SELECT DISTINCT [b0].[EmployeeID]
    FROM [BB_HR_Employee] AS [b0]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization0] ON [b0].[OrganizationID] = [b.Organization0].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType0] ON [b0].[IdentificationTypeID] = [b.IdentificationType0].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a0].*
        FROM [BB_GEN_Docs] AS [a0]
        WHERE ([a0].[EntityTypeID] = (
            SELECT TOP(1) [item0].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item0]
            WHERE [item0].[EntityTypeName] = @__tableName_0
        )) AND ([a0].[DocumentTypeID] = 7)
    ) AS [t0] ON [b0].[EmployeeID] = [t0].[EntityID]
) AS [t1] ON [b.EmployeeProffesionType].[EmployeeID] = [t1].[EmployeeID]
ORDER BY [t1].[EmployeeID]
2019-07-25 08:10:14,826 INFO - Executed DbCommand (74ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeAuthtorization].[EmployeeAuthorizationID], [b.EmployeeAuthtorization].[AuthorizationTypeID], [b.EmployeeAuthtorization].[Comment], [b.EmployeeAuthtorization].[DateFrom], [b.EmployeeAuthtorization].[dateInsert], [b.EmployeeAuthtorization].[DateTo], [b.EmployeeAuthtorization].[dateUpdate], [b.EmployeeAuthtorization].[EmployeeAuthorizationName], [b.EmployeeAuthtorization].[EmployeeID], [b.EmployeeAuthtorization].[SiteId], [b.EmployeeAuthtorization].[state], [b.EmployeeAuthtorization].[userInsert], [b.EmployeeAuthtorization].[UserUpdate]
FROM [BB_HR_EmployeeAuthtorization] AS [b.EmployeeAuthtorization]
INNER JOIN (
    SELECT DISTINCT [b1].[EmployeeID]
    FROM [BB_HR_Employee] AS [b1]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization1] ON [b1].[OrganizationID] = [b.Organization1].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType1] ON [b1].[IdentificationTypeID] = [b.IdentificationType1].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a1].*
        FROM [BB_GEN_Docs] AS [a1]
        WHERE ([a1].[EntityTypeID] = (
            SELECT TOP(1) [item1].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item1]
            WHERE [item1].[EntityTypeName] = @__tableName_0
        )) AND ([a1].[DocumentTypeID] = 7)
    ) AS [t2] ON [b1].[EmployeeID] = [t2].[EntityID]
) AS [t3] ON [b.EmployeeAuthtorization].[EmployeeID] = [t3].[EmployeeID]
ORDER BY [t3].[EmployeeID]
2019-07-25 08:10:14,901 INFO - Executed DbCommand (74ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeTraining].[EmployeeTrainingID], [b.EmployeeTraining].[Comment], [b.EmployeeTraining].[DateFrom], [b.EmployeeTraining].[dateInsert], [b.EmployeeTraining].[DateTo], [b.EmployeeTraining].[dateUpdate], [b.EmployeeTraining].[EmployeeID], [b.EmployeeTraining].[EmployeeTrainingName], [b.EmployeeTraining].[SiteID], [b.EmployeeTraining].[state], [b.EmployeeTraining].[TrainingTypeID], [b.EmployeeTraining].[userInsert], [b.EmployeeTraining].[UserUpdate]
FROM [BB_HR_EmployeeTraining] AS [b.EmployeeTraining]
INNER JOIN (
    SELECT DISTINCT [b2].[EmployeeID]
    FROM [BB_HR_Employee] AS [b2]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization2] ON [b2].[OrganizationID] = [b.Organization2].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType2] ON [b2].[IdentificationTypeID] = [b.IdentificationType2].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a2].*
        FROM [BB_GEN_Docs] AS [a2]
        WHERE ([a2].[EntityTypeID] = (
            SELECT TOP(1) [item2].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item2]
            WHERE [item2].[EntityTypeName] = @__tableName_0
        )) AND ([a2].[DocumentTypeID] = 7)
    ) AS [t4] ON [b2].[EmployeeID] = [t4].[EntityID]
) AS [t5] ON [b.EmployeeTraining].[EmployeeID] = [t5].[EmployeeID]
ORDER BY [t5].[EmployeeID]
2019-07-25 08:10:14,979 INFO - Executed DbCommand (75ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeWorkPermit].[EmployeeWorkPermitID], [b.EmployeeWorkPermit].[Comment], [b.EmployeeWorkPermit].[DateFrom], [b.EmployeeWorkPermit].[dateInsert], [b.EmployeeWorkPermit].[DateTo], [b.EmployeeWorkPermit].[dateUpdate], [b.EmployeeWorkPermit].[EmployeeID], [b.EmployeeWorkPermit].[EmployeeWorkPermitName], [b.EmployeeWorkPermit].[IsRequired], [b.EmployeeWorkPermit].[SiteID], [b.EmployeeWorkPermit].[state], [b.EmployeeWorkPermit].[userInsert], [b.EmployeeWorkPermit].[UserUpdate]
FROM [BB_HR_EmployeeWorkPermit] AS [b.EmployeeWorkPermit]
INNER JOIN (
    SELECT DISTINCT [b3].[EmployeeID]
    FROM [BB_HR_Employee] AS [b3]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization3] ON [b3].[OrganizationID] = [b.Organization3].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType3] ON [b3].[IdentificationTypeID] = [b.IdentificationType3].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a3].*
        FROM [BB_GEN_Docs] AS [a3]
        WHERE ([a3].[EntityTypeID] = (
            SELECT TOP(1) [item3].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item3]
            WHERE [item3].[EntityTypeName] = @__tableName_0
        )) AND ([a3].[DocumentTypeID] = 7)
    ) AS [t6] ON [b3].[EmployeeID] = [t6].[EntityID]
) AS [t7] ON [b.EmployeeWorkPermit].[EmployeeID] = [t7].[EmployeeID]
ORDER BY [t7].[EmployeeID]
2019-07-25 08:10:38,733 INFO - Executed DbCommand (74ms) [Parameters=[@__employee_EmployeeId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EmployeeID], [item].[Address], [item].[BirthDate], [item].[Citizenship], [item].[dateInsert], [item].[dateUpdate], [item].[FirstName], [item].[FirstNameEN], [item].[GenderID], [item].[IdentificationTypeID], [item].[IdentityNumber], [item].[LastName], [item].[LastNameEN], [item].[OrganizationID], [item].[PassportCountryID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_HR_Employee] AS [item]
WHERE [item].[EmployeeID] = @__employee_EmployeeId_0
2019-07-25 08:10:50,002 ERROR - Failed executing DbCommand (75ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 50), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [BB_HR_Employee] SET [Address] = @p0, [BirthDate] = @p1, [Citizenship] = @p2, [dateInsert] = @p3, [dateUpdate] = @p4, [FirstName] = @p5, [FirstNameEN] = @p6, [GenderID] = @p7, [IdentificationTypeID] = @p8, [IdentityNumber] = @p9, [LastName] = @p10, [LastNameEN] = @p11, [OrganizationID] = @p12, [PassportCountryID] = @p13, [state] = @p14, [userInsert] = @p15, [UserUpdate] = @p16
WHERE [EmployeeID] = @p17;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:e2364a6f-e18f-4a3e-bcea-c59332df2979
Error Number:547,State:0,Class:16
2019-07-25 08:10:50,092 ERROR - An exception occurred in the database while saving changes for context type 'Malam.Mastpen.Core.DAL.MastpenBitachonDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-25 08:10:50,175 INFO - The PutEmployeeAsync have been retrieved successfully.
2019-07-25 08:10:50,175 INFO - test log
2019-07-25 08:10:50,176 ERROR - There was a critical error on 'PutEmployeeAsync':   Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Malam.Mastpen.Core.BL.Services.EmployeeService.UpdateEmployeeAsync(Employee employee) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.Core\BL\Services\EmployeeService.cs:line 172
   at Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync(Int32 Id, EmployeeRequest request) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.API\Controllers\EmployeeController.cs:line 258
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextExceptionFilterAsync()
2019-07-25 08:10:50,180 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.PagedResponse`1[[Malam.Mastpen.Core.DAL.Entities.Employee, Malam.Mastpen.HR.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2019-07-25 08:10:50,184 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 50451.5242ms
2019-07-25 08:10:50,187 INFO - Request finished in 50475.2106ms 200 application/json; charset=utf-8
2019-07-25 08:12:37,443 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:12:37,443 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:12:37,493 INFO - Request finished in 49.7793ms 200 
2019-07-25 08:12:37,519 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:12:37,645 INFO - Request finished in 207.7867ms 200 text/html
2019-07-25 08:12:37,861 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:12:37,872 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:12:38,308 INFO - Request finished in 447.8511ms 200 application/json;charset=utf-8
2019-07-25 08:12:51,550 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 08:12:51,560 INFO - CORS policy execution failed.
2019-07-25 08:12:51,562 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:12:53,150 INFO - Successfully validated the token.
2019-07-25 08:12:53,165 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:12:53,267 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 08:12:53,282 INFO - Authorization was successful.
2019-07-25 08:12:58,901 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 08:13:00,951 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) with arguments (146, Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 08:13:03,098 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:13:03,284 WARN - The Include operation for navigation '[b].IdentificationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:13:03,285 WARN - The Include operation for navigation '[b].Organization' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:13:03,287 WARN - The Include operation for navigation '[b].EmployeeProffesionType.ProffesionType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:13:03,290 WARN - The Include operation for navigation '[b].EmployeeAuthtorization' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:13:03,292 WARN - The Include operation for navigation '[b].EmployeeTraining' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:13:03,294 WARN - The Include operation for navigation '[b].EmployeeWorkPermit' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:13:04,199 INFO - Executed DbCommand (87ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_HR_Employee] AS [b]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
2019-07-25 08:13:04,596 INFO - Executed DbCommand (73ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b].[EmployeeID], [b].[Address], [b].[BirthDate], [b].[Citizenship], [b].[dateInsert], [b].[dateUpdate], [b].[FirstName], [b].[FirstNameEN], [b].[GenderID], [b].[IdentificationTypeID], [b].[IdentityNumber], [b].[LastName], [b].[LastNameEN], [b].[OrganizationID], [b].[PassportCountryID], [b].[state], [b].[userInsert], [b].[UserUpdate], [b.Organization].[OrganizationID], [b.Organization].[Comment], [b.Organization].[dateInsert], [b.Organization].[dateUpdate], [b.Organization].[OrganizationExpertiseTypeID], [b.Organization].[OrganizationName], [b.Organization].[OrganizationNumber], [b.Organization].[OrganizationParentID], [b.Organization].[OrganizationTypeID], [b.Organization].[state], [b.Organization].[userInsert], [b.Organization].[UserUpdate], [b.IdentificationType].[IdentificationTypeID], [b.IdentificationType].[Comment], [b.IdentificationType].[dateInsert], [b.IdentificationType].[dateUpdate], [b.IdentificationType].[IdentificationTypeName], [b.IdentificationType].[state], [b.IdentificationType].[userInsert], [b.IdentificationType].[UserUpdate], [t].[DocumentID], [t].[dateInsert], [t].[dateUpdate], [t].[DocumentDate], [t].[DocumentPath], [t].[DocumentTypeID], [t].[EntityID], [t].[EntityTypeID], [t].[IsDocumentSigned], [t].[LanguageID], [t].[state], [t].[userInsert], [t].[UserUpdate], [t].[ValIdDate]
FROM [BB_HR_Employee] AS [b]
LEFT JOIN [BB_GEN_Organization] AS [b.Organization] ON [b].[OrganizationID] = [b.Organization].[OrganizationID]
LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType] ON [b].[IdentificationTypeID] = [b.IdentificationType].[IdentificationTypeID]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
ORDER BY [b].[EmployeeID]
2019-07-25 08:13:04,901 INFO - Executed DbCommand (71ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeProffesionType].[EmployeeAuthorizationID], [b.EmployeeProffesionType].[Comment], [b.EmployeeProffesionType].[dateInsert], [b.EmployeeProffesionType].[dateUpdate], [b.EmployeeProffesionType].[EmployeeID], [b.EmployeeProffesionType].[ProffesionTypeID], [b.EmployeeProffesionType].[state], [b.EmployeeProffesionType].[userInsert], [b.EmployeeProffesionType].[UserUpdate], [e.ProffesionType].[ProffesionTypeID], [e.ProffesionType].[Comment], [e.ProffesionType].[dateInsert], [e.ProffesionType].[dateUpdate], [e.ProffesionType].[ProffesionTypeName], [e.ProffesionType].[state], [e.ProffesionType].[userInsert], [e.ProffesionType].[UserUpdate]
FROM [BB_HR_EmployeeProffesionType] AS [b.EmployeeProffesionType]
LEFT JOIN [BB_HR_ProffesionType] AS [e.ProffesionType] ON [b.EmployeeProffesionType].[ProffesionTypeID] = [e.ProffesionType].[ProffesionTypeID]
INNER JOIN (
    SELECT DISTINCT [b0].[EmployeeID]
    FROM [BB_HR_Employee] AS [b0]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization0] ON [b0].[OrganizationID] = [b.Organization0].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType0] ON [b0].[IdentificationTypeID] = [b.IdentificationType0].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a0].*
        FROM [BB_GEN_Docs] AS [a0]
        WHERE ([a0].[EntityTypeID] = (
            SELECT TOP(1) [item0].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item0]
            WHERE [item0].[EntityTypeName] = @__tableName_0
        )) AND ([a0].[DocumentTypeID] = 7)
    ) AS [t0] ON [b0].[EmployeeID] = [t0].[EntityID]
) AS [t1] ON [b.EmployeeProffesionType].[EmployeeID] = [t1].[EmployeeID]
ORDER BY [t1].[EmployeeID]
2019-07-25 08:13:05,011 INFO - Executed DbCommand (71ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeAuthtorization].[EmployeeAuthorizationID], [b.EmployeeAuthtorization].[AuthorizationTypeID], [b.EmployeeAuthtorization].[Comment], [b.EmployeeAuthtorization].[DateFrom], [b.EmployeeAuthtorization].[dateInsert], [b.EmployeeAuthtorization].[DateTo], [b.EmployeeAuthtorization].[dateUpdate], [b.EmployeeAuthtorization].[EmployeeAuthorizationName], [b.EmployeeAuthtorization].[EmployeeID], [b.EmployeeAuthtorization].[SiteId], [b.EmployeeAuthtorization].[state], [b.EmployeeAuthtorization].[userInsert], [b.EmployeeAuthtorization].[UserUpdate]
FROM [BB_HR_EmployeeAuthtorization] AS [b.EmployeeAuthtorization]
INNER JOIN (
    SELECT DISTINCT [b1].[EmployeeID]
    FROM [BB_HR_Employee] AS [b1]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization1] ON [b1].[OrganizationID] = [b.Organization1].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType1] ON [b1].[IdentificationTypeID] = [b.IdentificationType1].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a1].*
        FROM [BB_GEN_Docs] AS [a1]
        WHERE ([a1].[EntityTypeID] = (
            SELECT TOP(1) [item1].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item1]
            WHERE [item1].[EntityTypeName] = @__tableName_0
        )) AND ([a1].[DocumentTypeID] = 7)
    ) AS [t2] ON [b1].[EmployeeID] = [t2].[EntityID]
) AS [t3] ON [b.EmployeeAuthtorization].[EmployeeID] = [t3].[EmployeeID]
ORDER BY [t3].[EmployeeID]
2019-07-25 08:13:05,097 INFO - Executed DbCommand (71ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeTraining].[EmployeeTrainingID], [b.EmployeeTraining].[Comment], [b.EmployeeTraining].[DateFrom], [b.EmployeeTraining].[dateInsert], [b.EmployeeTraining].[DateTo], [b.EmployeeTraining].[dateUpdate], [b.EmployeeTraining].[EmployeeID], [b.EmployeeTraining].[EmployeeTrainingName], [b.EmployeeTraining].[SiteID], [b.EmployeeTraining].[state], [b.EmployeeTraining].[TrainingTypeID], [b.EmployeeTraining].[userInsert], [b.EmployeeTraining].[UserUpdate]
FROM [BB_HR_EmployeeTraining] AS [b.EmployeeTraining]
INNER JOIN (
    SELECT DISTINCT [b2].[EmployeeID]
    FROM [BB_HR_Employee] AS [b2]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization2] ON [b2].[OrganizationID] = [b.Organization2].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType2] ON [b2].[IdentificationTypeID] = [b.IdentificationType2].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a2].*
        FROM [BB_GEN_Docs] AS [a2]
        WHERE ([a2].[EntityTypeID] = (
            SELECT TOP(1) [item2].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item2]
            WHERE [item2].[EntityTypeName] = @__tableName_0
        )) AND ([a2].[DocumentTypeID] = 7)
    ) AS [t4] ON [b2].[EmployeeID] = [t4].[EntityID]
) AS [t5] ON [b.EmployeeTraining].[EmployeeID] = [t5].[EmployeeID]
ORDER BY [t5].[EmployeeID]
2019-07-25 08:13:05,195 INFO - Executed DbCommand (75ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeWorkPermit].[EmployeeWorkPermitID], [b.EmployeeWorkPermit].[Comment], [b.EmployeeWorkPermit].[DateFrom], [b.EmployeeWorkPermit].[dateInsert], [b.EmployeeWorkPermit].[DateTo], [b.EmployeeWorkPermit].[dateUpdate], [b.EmployeeWorkPermit].[EmployeeID], [b.EmployeeWorkPermit].[EmployeeWorkPermitName], [b.EmployeeWorkPermit].[IsRequired], [b.EmployeeWorkPermit].[SiteID], [b.EmployeeWorkPermit].[state], [b.EmployeeWorkPermit].[userInsert], [b.EmployeeWorkPermit].[UserUpdate]
FROM [BB_HR_EmployeeWorkPermit] AS [b.EmployeeWorkPermit]
INNER JOIN (
    SELECT DISTINCT [b3].[EmployeeID]
    FROM [BB_HR_Employee] AS [b3]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization3] ON [b3].[OrganizationID] = [b.Organization3].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType3] ON [b3].[IdentificationTypeID] = [b.IdentificationType3].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a3].*
        FROM [BB_GEN_Docs] AS [a3]
        WHERE ([a3].[EntityTypeID] = (
            SELECT TOP(1) [item3].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item3]
            WHERE [item3].[EntityTypeName] = @__tableName_0
        )) AND ([a3].[DocumentTypeID] = 7)
    ) AS [t6] ON [b3].[EmployeeID] = [t6].[EntityID]
) AS [t7] ON [b.EmployeeWorkPermit].[EmployeeID] = [t7].[EmployeeID]
ORDER BY [t7].[EmployeeID]
2019-07-25 08:13:16,706 INFO - Executed DbCommand (72ms) [Parameters=[@__employee_EmployeeId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[EmployeeID], [item].[Address], [item].[BirthDate], [item].[Citizenship], [item].[dateInsert], [item].[dateUpdate], [item].[FirstName], [item].[FirstNameEN], [item].[GenderID], [item].[IdentificationTypeID], [item].[IdentityNumber], [item].[LastName], [item].[LastNameEN], [item].[OrganizationID], [item].[PassportCountryID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_HR_Employee] AS [item]
WHERE [item].[EmployeeID] = @__employee_EmployeeId_0
2019-07-25 08:13:41,332 ERROR - Failed executing DbCommand (73ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 50), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [BB_HR_Employee] SET [Address] = @p0, [BirthDate] = @p1, [Citizenship] = @p2, [dateInsert] = @p3, [dateUpdate] = @p4, [FirstName] = @p5, [FirstNameEN] = @p6, [GenderID] = @p7, [IdentificationTypeID] = @p8, [IdentityNumber] = @p9, [LastName] = @p10, [LastNameEN] = @p11, [OrganizationID] = @p12, [PassportCountryID] = @p13, [state] = @p14, [userInsert] = @p15, [UserUpdate] = @p16
WHERE [EmployeeID] = @p17;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:92210b19-421d-4cf3-93a1-c85f4b0530ce
Error Number:547,State:0,Class:16
2019-07-25 08:13:41,466 ERROR - An exception occurred in the database while saving changes for context type 'Malam.Mastpen.Core.DAL.MastpenBitachonDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-25 08:13:41,559 INFO - The PutEmployeeAsync have been retrieved successfully.
2019-07-25 08:13:41,564 INFO - test log
2019-07-25 08:13:41,583 ERROR - There was a critical error on 'PutEmployeeAsync':   Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BB_HR_Employee_OrganizationID". The conflict occurred in database "MastpenDb", table "dbo.BB_GEN_Organization", column 'OrganizationID'.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Malam.Mastpen.Core.BL.Services.EmployeeService.UpdateEmployeeAsync(Employee employee) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.Core\BL\Services\EmployeeService.cs:line 170
   at Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync(Int32 Id, EmployeeRequest request) in C:\Users\riki_apter.000\source\repos\MastpenProject\Malam.Mastpen.MS.HR\Malam.Mastpen.API\Controllers\EmployeeController.cs:line 258
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextExceptionFilterAsync()
2019-07-25 08:13:41,594 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.PagedResponse`1[[Malam.Mastpen.Core.DAL.Entities.Employee, Malam.Mastpen.HR.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2019-07-25 08:13:41,611 INFO - Executed action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) in 48340.2395ms
2019-07-25 08:13:41,626 INFO - Request finished in 50075.8048ms 200 application/json; charset=utf-8
2019-07-25 08:14:52,936 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:14:52,936 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:14:53,015 INFO - Request finished in 88.2811ms 200 
2019-07-25 08:14:53,032 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:14:53,171 INFO - Request finished in 241.3852ms 200 text/html
2019-07-25 08:14:53,407 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:14:53,416 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:14:53,796 INFO - Request finished in 393.5875ms 200 application/json;charset=utf-8
2019-07-25 08:15:10,552 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Employee/Employee/146 application/json-patch+json 639
2019-07-25 08:15:10,558 INFO - CORS policy execution failed.
2019-07-25 08:15:10,560 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:15:12,407 INFO - Successfully validated the token.
2019-07-25 08:15:12,419 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:15:12,531 INFO - Route matched with {action = "PutEmployeeAsync", controller = "Employee"}. Executing action Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API)
2019-07-25 08:15:12,570 INFO - Authorization was successful.
2019-07-25 08:15:17,617 INFO - 'PutEmployeeAsync' has been invoked
2019-07-25 08:15:19,317 INFO - Executing action method Malam.Mastpen.API.Controllers.EmployeeController.PutEmployeeAsync (Malam.Mastpen.HR.API) with arguments (146, Malam.Mastpen.Core.BL.Requests.EmployeeRequest) - Validation state: Valid
2019-07-25 08:15:23,690 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:15:23,867 WARN - The Include operation for navigation '[b].IdentificationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:15:23,871 WARN - The Include operation for navigation '[b].Organization' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:15:23,872 WARN - The Include operation for navigation '[b].EmployeeProffesionType.ProffesionType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:15:23,873 WARN - The Include operation for navigation '[b].EmployeeAuthtorization' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:15:23,875 WARN - The Include operation for navigation '[b].EmployeeTraining' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:15:23,876 WARN - The Include operation for navigation '[b].EmployeeWorkPermit' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:15:24,938 INFO - Executed DbCommand (100ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_HR_Employee] AS [b]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
2019-07-25 08:15:25,334 INFO - Executed DbCommand (83ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b].[EmployeeID], [b].[Address], [b].[BirthDate], [b].[Citizenship], [b].[dateInsert], [b].[dateUpdate], [b].[FirstName], [b].[FirstNameEN], [b].[GenderID], [b].[IdentificationTypeID], [b].[IdentityNumber], [b].[LastName], [b].[LastNameEN], [b].[OrganizationID], [b].[PassportCountryID], [b].[state], [b].[userInsert], [b].[UserUpdate], [b.Organization].[OrganizationID], [b.Organization].[Comment], [b.Organization].[dateInsert], [b.Organization].[dateUpdate], [b.Organization].[OrganizationExpertiseTypeID], [b.Organization].[OrganizationName], [b.Organization].[OrganizationNumber], [b.Organization].[OrganizationParentID], [b.Organization].[OrganizationTypeID], [b.Organization].[state], [b.Organization].[userInsert], [b.Organization].[UserUpdate], [b.IdentificationType].[IdentificationTypeID], [b.IdentificationType].[Comment], [b.IdentificationType].[dateInsert], [b.IdentificationType].[dateUpdate], [b.IdentificationType].[IdentificationTypeName], [b.IdentificationType].[state], [b.IdentificationType].[userInsert], [b.IdentificationType].[UserUpdate], [t].[DocumentID], [t].[dateInsert], [t].[dateUpdate], [t].[DocumentDate], [t].[DocumentPath], [t].[DocumentTypeID], [t].[EntityID], [t].[EntityTypeID], [t].[IsDocumentSigned], [t].[LanguageID], [t].[state], [t].[userInsert], [t].[UserUpdate], [t].[ValIdDate]
FROM [BB_HR_Employee] AS [b]
LEFT JOIN [BB_GEN_Organization] AS [b.Organization] ON [b].[OrganizationID] = [b.Organization].[OrganizationID]
LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType] ON [b].[IdentificationTypeID] = [b.IdentificationType].[IdentificationTypeID]
LEFT JOIN (
    SELECT [a].[DocumentID], [a].[dateInsert], [a].[dateUpdate], [a].[DocumentDate], [a].[DocumentPath], [a].[DocumentTypeID], [a].[EntityID], [a].[EntityTypeID], [a].[IsDocumentSigned], [a].[LanguageID], [a].[state], [a].[userInsert], [a].[UserUpdate], [a].[ValIdDate]
    FROM [BB_GEN_Docs] AS [a]
    WHERE ([a].[EntityTypeID] = (
        SELECT TOP(1) [item].[EntityTypeID]
        FROM [BB_GEN_EntityType] AS [item]
        WHERE [item].[EntityTypeName] = @__tableName_0
    )) AND ([a].[DocumentTypeID] = 7)
) AS [t] ON [b].[EmployeeID] = [t].[EntityID]
ORDER BY [b].[EmployeeID]
2019-07-25 08:15:25,652 INFO - Executed DbCommand (78ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeProffesionType].[EmployeeAuthorizationID], [b.EmployeeProffesionType].[Comment], [b.EmployeeProffesionType].[dateInsert], [b.EmployeeProffesionType].[dateUpdate], [b.EmployeeProffesionType].[EmployeeID], [b.EmployeeProffesionType].[ProffesionTypeID], [b.EmployeeProffesionType].[state], [b.EmployeeProffesionType].[userInsert], [b.EmployeeProffesionType].[UserUpdate], [e.ProffesionType].[ProffesionTypeID], [e.ProffesionType].[Comment], [e.ProffesionType].[dateInsert], [e.ProffesionType].[dateUpdate], [e.ProffesionType].[ProffesionTypeName], [e.ProffesionType].[state], [e.ProffesionType].[userInsert], [e.ProffesionType].[UserUpdate]
FROM [BB_HR_EmployeeProffesionType] AS [b.EmployeeProffesionType]
LEFT JOIN [BB_HR_ProffesionType] AS [e.ProffesionType] ON [b.EmployeeProffesionType].[ProffesionTypeID] = [e.ProffesionType].[ProffesionTypeID]
INNER JOIN (
    SELECT DISTINCT [b0].[EmployeeID]
    FROM [BB_HR_Employee] AS [b0]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization0] ON [b0].[OrganizationID] = [b.Organization0].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType0] ON [b0].[IdentificationTypeID] = [b.IdentificationType0].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a0].*
        FROM [BB_GEN_Docs] AS [a0]
        WHERE ([a0].[EntityTypeID] = (
            SELECT TOP(1) [item0].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item0]
            WHERE [item0].[EntityTypeName] = @__tableName_0
        )) AND ([a0].[DocumentTypeID] = 7)
    ) AS [t0] ON [b0].[EmployeeID] = [t0].[EntityID]
) AS [t1] ON [b.EmployeeProffesionType].[EmployeeID] = [t1].[EmployeeID]
ORDER BY [t1].[EmployeeID]
2019-07-25 08:15:25,766 INFO - Executed DbCommand (77ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeAuthtorization].[EmployeeAuthorizationID], [b.EmployeeAuthtorization].[AuthorizationTypeID], [b.EmployeeAuthtorization].[Comment], [b.EmployeeAuthtorization].[DateFrom], [b.EmployeeAuthtorization].[dateInsert], [b.EmployeeAuthtorization].[DateTo], [b.EmployeeAuthtorization].[dateUpdate], [b.EmployeeAuthtorization].[EmployeeAuthorizationName], [b.EmployeeAuthtorization].[EmployeeID], [b.EmployeeAuthtorization].[SiteId], [b.EmployeeAuthtorization].[state], [b.EmployeeAuthtorization].[userInsert], [b.EmployeeAuthtorization].[UserUpdate]
FROM [BB_HR_EmployeeAuthtorization] AS [b.EmployeeAuthtorization]
INNER JOIN (
    SELECT DISTINCT [b1].[EmployeeID]
    FROM [BB_HR_Employee] AS [b1]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization1] ON [b1].[OrganizationID] = [b.Organization1].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType1] ON [b1].[IdentificationTypeID] = [b.IdentificationType1].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a1].*
        FROM [BB_GEN_Docs] AS [a1]
        WHERE ([a1].[EntityTypeID] = (
            SELECT TOP(1) [item1].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item1]
            WHERE [item1].[EntityTypeName] = @__tableName_0
        )) AND ([a1].[DocumentTypeID] = 7)
    ) AS [t2] ON [b1].[EmployeeID] = [t2].[EntityID]
) AS [t3] ON [b.EmployeeAuthtorization].[EmployeeID] = [t3].[EmployeeID]
ORDER BY [t3].[EmployeeID]
2019-07-25 08:15:25,873 INFO - Executed DbCommand (80ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeTraining].[EmployeeTrainingID], [b.EmployeeTraining].[Comment], [b.EmployeeTraining].[DateFrom], [b.EmployeeTraining].[dateInsert], [b.EmployeeTraining].[DateTo], [b.EmployeeTraining].[dateUpdate], [b.EmployeeTraining].[EmployeeID], [b.EmployeeTraining].[EmployeeTrainingName], [b.EmployeeTraining].[SiteID], [b.EmployeeTraining].[state], [b.EmployeeTraining].[TrainingTypeID], [b.EmployeeTraining].[userInsert], [b.EmployeeTraining].[UserUpdate]
FROM [BB_HR_EmployeeTraining] AS [b.EmployeeTraining]
INNER JOIN (
    SELECT DISTINCT [b2].[EmployeeID]
    FROM [BB_HR_Employee] AS [b2]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization2] ON [b2].[OrganizationID] = [b.Organization2].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType2] ON [b2].[IdentificationTypeID] = [b.IdentificationType2].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a2].*
        FROM [BB_GEN_Docs] AS [a2]
        WHERE ([a2].[EntityTypeID] = (
            SELECT TOP(1) [item2].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item2]
            WHERE [item2].[EntityTypeName] = @__tableName_0
        )) AND ([a2].[DocumentTypeID] = 7)
    ) AS [t4] ON [b2].[EmployeeID] = [t4].[EntityID]
) AS [t5] ON [b.EmployeeTraining].[EmployeeID] = [t5].[EmployeeID]
ORDER BY [t5].[EmployeeID]
2019-07-25 08:15:25,979 INFO - Executed DbCommand (81ms) [Parameters=[@__tableName_0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SELECT [b.EmployeeWorkPermit].[EmployeeWorkPermitID], [b.EmployeeWorkPermit].[Comment], [b.EmployeeWorkPermit].[DateFrom], [b.EmployeeWorkPermit].[dateInsert], [b.EmployeeWorkPermit].[DateTo], [b.EmployeeWorkPermit].[dateUpdate], [b.EmployeeWorkPermit].[EmployeeID], [b.EmployeeWorkPermit].[EmployeeWorkPermitName], [b.EmployeeWorkPermit].[IsRequired], [b.EmployeeWorkPermit].[SiteID], [b.EmployeeWorkPermit].[state], [b.EmployeeWorkPermit].[userInsert], [b.EmployeeWorkPermit].[UserUpdate]
FROM [BB_HR_EmployeeWorkPermit] AS [b.EmployeeWorkPermit]
INNER JOIN (
    SELECT DISTINCT [b3].[EmployeeID]
    FROM [BB_HR_Employee] AS [b3]
    LEFT JOIN [BB_GEN_Organization] AS [b.Organization3] ON [b3].[OrganizationID] = [b.Organization3].[OrganizationID]
    LEFT JOIN [BB_HR_IdentificationType] AS [b.IdentificationType3] ON [b3].[IdentificationTypeID] = [b.IdentificationType3].[IdentificationTypeID]
    LEFT JOIN (
        SELECT [a3].*
        FROM [BB_GEN_Docs] AS [a3]
        WHERE ([a3].[EntityTypeID] = (
            SELECT TOP(1) [item3].[EntityTypeID]
            FROM [BB_GEN_EntityType] AS [item3]
            WHERE [item3].[EntityTypeName] = @__tableName_0
        )) AND ([a3].[DocumentTypeID] = 7)
    ) AS [t6] ON [b3].[EmployeeID] = [t6].[EntityID]
) AS [t7] ON [b.EmployeeWorkPermit].[EmployeeID] = [t7].[EmployeeID]
ORDER BY [t7].[EmployeeID]
2019-07-25 08:16:19,153 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:16:19,153 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:16:19,220 INFO - Request finished in 72.7512ms 200 
2019-07-25 08:16:19,239 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:16:19,371 INFO - Request finished in 224.4574ms 200 text/html
2019-07-25 08:16:19,566 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:16:19,572 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:16:19,941 INFO - Request finished in 371.4233ms 200 application/json;charset=utf-8
2019-07-25 08:16:35,474 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 856
2019-07-25 08:16:35,481 INFO - CORS policy execution failed.
2019-07-25 08:16:35,482 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:16:35,484 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:16:35,558 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:16:56,671 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:16:56,683 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:16:58,690 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:16:58,779 WARN - The Include operation for navigation '[x].OrganizationExpertiseType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:16:58,782 WARN - The Include operation for navigation '[x].OrganizationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:16:59,566 INFO - Executed DbCommand (90ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:16:59,935 INFO - Executed DbCommand (75ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
2019-07-25 08:17:02,359 INFO - Executed DbCommand (75ms) [Parameters=[@__organization_OrganizationId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[OrganizationID], [item].[Comment], [item].[dateInsert], [item].[dateUpdate], [item].[OrganizationExpertiseTypeID], [item].[OrganizationName], [item].[OrganizationNumber], [item].[OrganizationParentID], [item].[OrganizationTypeID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_Organization] AS [item]
WHERE [item].[OrganizationID] = @__organization_OrganizationId_0
2019-07-25 08:18:30,632 INFO - Executed DbCommand (75ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [BB_GEN_Organization] SET [Comment] = @p0, [dateInsert] = @p1, [dateUpdate] = @p2, [OrganizationExpertiseTypeID] = @p3, [OrganizationName] = @p4, [OrganizationNumber] = @p5, [OrganizationParentID] = @p6, [OrganizationTypeID] = @p7, [state] = @p8, [userInsert] = @p9, [UserUpdate] = @p10
WHERE [OrganizationID] = @p11;
SELECT @@ROWCOUNT;
2019-07-25 08:18:30,753 INFO - Executed action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 94066.3106ms.
2019-07-25 08:18:30,754 INFO - The PutOrganizationAsync have been retrieved successfully.
2019-07-25 08:18:30,769 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.ResponseBasic'.
2019-07-25 08:18:30,783 INFO - Executed action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) in 115221.5708ms
2019-07-25 08:18:31,844 INFO - Request finished in 116373.0001ms 200 application/json; charset=utf-8
2019-07-25 08:18:34,249 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 856
2019-07-25 08:18:34,252 INFO - CORS policy execution failed.
2019-07-25 08:18:34,254 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:18:34,256 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:18:34,260 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:18:41,698 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:18:41,706 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:18:42,924 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:18:43,003 INFO - Executed DbCommand (70ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:18:43,076 INFO - Executed DbCommand (71ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
2019-07-25 08:19:05,188 INFO - Executed DbCommand (70ms) [Parameters=[@__organization_OrganizationId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[OrganizationID], [item].[Comment], [item].[dateInsert], [item].[dateUpdate], [item].[OrganizationExpertiseTypeID], [item].[OrganizationName], [item].[OrganizationNumber], [item].[OrganizationParentID], [item].[OrganizationTypeID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_Organization] AS [item]
WHERE [item].[OrganizationID] = @__organization_OrganizationId_0
2019-07-25 08:19:14,141 INFO - Executed DbCommand (70ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [BB_GEN_Organization] SET [Comment] = @p0, [dateInsert] = @p1, [dateUpdate] = @p2, [OrganizationExpertiseTypeID] = @p3, [OrganizationName] = @p4, [OrganizationNumber] = @p5, [OrganizationParentID] = @p6, [OrganizationTypeID] = @p7, [state] = @p8, [userInsert] = @p9, [UserUpdate] = @p10
WHERE [OrganizationID] = @p11;
SELECT @@ROWCOUNT;
2019-07-25 08:19:14,220 INFO - Executed action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 32512.1619ms.
2019-07-25 08:19:14,220 INFO - The PutOrganizationAsync have been retrieved successfully.
2019-07-25 08:19:14,224 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.ResponseBasic'.
2019-07-25 08:19:14,228 INFO - Executed action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) in 39965.9088ms
2019-07-25 08:19:14,232 INFO - Request finished in 39981.4899ms 200 application/json; charset=utf-8
2019-07-25 08:19:16,307 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 856
2019-07-25 08:19:16,310 INFO - CORS policy execution failed.
2019-07-25 08:19:16,312 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:19:16,315 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:19:16,318 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:19:56,945 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:19:56,946 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:19:56,948 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:19:57,021 INFO - Executed DbCommand (71ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:19:57,097 INFO - Executed DbCommand (72ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
2019-07-25 08:20:52,268 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:20:52,268 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:20:52,316 INFO - Request finished in 46.0791ms 200 
2019-07-25 08:20:52,358 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:20:52,495 INFO - Request finished in 231.8687ms 200 text/html
2019-07-25 08:20:52,689 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:20:52,695 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:20:53,111 INFO - Request finished in 421.5684ms 200 application/json;charset=utf-8
2019-07-25 08:21:07,094 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 856
2019-07-25 08:21:07,097 INFO - CORS policy execution failed.
2019-07-25 08:21:07,102 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:21:09,237 INFO - Successfully validated the token.
2019-07-25 08:21:09,244 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:21:09,325 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:21:09,349 INFO - Authorization was successful.
2019-07-25 08:21:18,669 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:21:19,795 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:21:21,137 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:21:21,237 WARN - The Include operation for navigation '[x].OrganizationExpertiseType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:21:21,239 WARN - The Include operation for navigation '[x].OrganizationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:21:22,175 INFO - Executed DbCommand (102ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:21:22,582 INFO - Executed DbCommand (78ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
2019-07-25 08:21:26,681 INFO - Executed DbCommand (77ms) [Parameters=[@__organization_OrganizationId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[OrganizationID], [item].[Comment], [item].[dateInsert], [item].[dateUpdate], [item].[OrganizationExpertiseTypeID], [item].[OrganizationName], [item].[OrganizationNumber], [item].[OrganizationParentID], [item].[OrganizationTypeID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_Organization] AS [item]
WHERE [item].[OrganizationID] = @__organization_OrganizationId_0
2019-07-25 08:21:28,782 INFO - Executed DbCommand (82ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [BB_GEN_Organization] SET [Comment] = @p0, [dateInsert] = @p1, [dateUpdate] = @p2, [OrganizationExpertiseTypeID] = @p3, [OrganizationName] = @p4, [OrganizationNumber] = @p5, [OrganizationParentID] = @p6, [OrganizationTypeID] = @p7, [state] = @p8, [userInsert] = @p9, [UserUpdate] = @p10
WHERE [OrganizationID] = @p11;
SELECT @@ROWCOUNT;
2019-07-25 08:21:28,897 INFO - Executed action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 9098.5693ms.
2019-07-25 08:21:28,898 INFO - The PutOrganizationAsync have been retrieved successfully.
2019-07-25 08:21:28,910 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.ResponseBasic'.
2019-07-25 08:21:28,923 INFO - Executed action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) in 19594.3253ms
2019-07-25 08:21:28,937 INFO - Request finished in 21846.828ms 200 application/json; charset=utf-8
2019-07-25 08:22:55,136 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 866
2019-07-25 08:22:55,138 INFO - CORS policy execution failed.
2019-07-25 08:22:55,141 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:22:55,145 INFO - Successfully validated the token.
2019-07-25 08:22:55,147 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:22:55,149 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:22:55,151 INFO - Authorization was successful.
2019-07-25 08:22:58,761 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:22:59,486 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:22:59,493 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:22:59,585 INFO - Executed DbCommand (77ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:22:59,597 WARN - Query: '(from Organization x in DbSet<Organization> select [x]).Skip(__p_0).Take(__p_1)' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-25 08:22:59,696 INFO - Executed DbCommand (76ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2019-07-25 08:23:09,182 INFO - Executed DbCommand (76ms) [Parameters=[@__organization_OrganizationId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[OrganizationID], [item].[Comment], [item].[dateInsert], [item].[dateUpdate], [item].[OrganizationExpertiseTypeID], [item].[OrganizationName], [item].[OrganizationNumber], [item].[OrganizationParentID], [item].[OrganizationTypeID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_Organization] AS [item]
WHERE [item].[OrganizationID] = @__organization_OrganizationId_0
2019-07-25 08:24:15,087 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:24:15,087 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:24:15,155 INFO - Request finished in 61.7486ms 200 
2019-07-25 08:24:15,163 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:24:15,300 INFO - Request finished in 216.0353ms 200 text/html
2019-07-25 08:24:15,504 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:24:15,516 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:24:15,870 INFO - Request finished in 363.8779ms 200 application/json;charset=utf-8
2019-07-25 08:24:53,360 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 866
2019-07-25 08:24:53,364 INFO - CORS policy execution failed.
2019-07-25 08:24:53,365 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:24:55,025 INFO - Successfully validated the token.
2019-07-25 08:24:55,031 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:24:55,120 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:24:55,132 INFO - Authorization was successful.
2019-07-25 08:25:23,234 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:25:24,387 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:25:25,478 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:25:25,565 WARN - The Include operation for navigation '[x].OrganizationExpertiseType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:25:25,566 WARN - The Include operation for navigation '[x].OrganizationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:25:26,385 INFO - Executed DbCommand (83ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:25:26,446 WARN - Query: '(from Organization x in DbSet<Organization> select [x]).Skip(__p_0).Take(__p_1)' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-25 08:25:26,774 INFO - Executed DbCommand (73ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2019-07-25 08:26:42,255 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:26:42,255 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:26:42,312 INFO - Request finished in 72.2573ms 200 
2019-07-25 08:26:42,350 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:26:42,497 INFO - Request finished in 267.7691ms 200 text/html
2019-07-25 08:26:42,701 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:26:42,720 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:26:43,167 INFO - Request finished in 466.8488ms 200 application/json;charset=utf-8
2019-07-25 08:27:16,632 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 869
2019-07-25 08:27:16,643 INFO - CORS policy execution failed.
2019-07-25 08:27:16,646 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:27:18,357 INFO - Successfully validated the token.
2019-07-25 08:27:18,363 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:27:18,449 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:27:18,466 INFO - Authorization was successful.
2019-07-25 08:27:22,482 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:27:23,189 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:27:24,340 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:27:24,446 WARN - The Include operation for navigation '[x].OrganizationExpertiseType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:27:24,448 WARN - The Include operation for navigation '[x].OrganizationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:27:25,351 INFO - Executed DbCommand (97ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:27:25,408 WARN - Query: '(from Organization x in DbSet<Organization> select [x]).Skip(__p_0).Take(__p_1)' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-25 08:27:25,740 INFO - Executed DbCommand (79ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2019-07-25 08:28:05,052 INFO - Executed DbCommand (77ms) [Parameters=[@__organization_OrganizationId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[OrganizationID], [item].[Comment], [item].[dateInsert], [item].[dateUpdate], [item].[OrganizationExpertiseTypeID], [item].[OrganizationName], [item].[OrganizationNumber], [item].[OrganizationParentID], [item].[OrganizationTypeID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_Organization] AS [item]
WHERE [item].[OrganizationID] = @__organization_OrganizationId_0
2019-07-25 08:31:17,815 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:31:17,815 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:31:17,857 INFO - Request finished in 66.0683ms 200 
2019-07-25 08:31:17,878 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:31:18,012 INFO - Request finished in 222.5567ms 200 text/html
2019-07-25 08:31:18,232 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:31:18,271 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:31:18,717 INFO - Request finished in 497.7418ms 200 application/json;charset=utf-8
2019-07-25 08:32:17,385 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 196
2019-07-25 08:32:17,388 INFO - CORS policy execution failed.
2019-07-25 08:32:17,389 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:32:19,199 INFO - Successfully validated the token.
2019-07-25 08:32:19,204 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:32:19,280 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:32:19,294 INFO - Authorization was successful.
2019-07-25 08:32:28,439 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:32:29,777 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:32:30,885 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:32:30,981 WARN - The Include operation for navigation '[x].OrganizationExpertiseType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:32:30,983 WARN - The Include operation for navigation '[x].OrganizationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:32:31,871 INFO - Executed DbCommand (87ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:32:31,930 WARN - Query: '(from Organization x in DbSet<Organization> select [x]).Skip(__p_0).Take(__p_1)' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-25 08:32:32,264 INFO - Executed DbCommand (73ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2019-07-25 08:32:38,737 INFO - Executed DbCommand (71ms) [Parameters=[@__organization_OrganizationId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[OrganizationID], [item].[Comment], [item].[dateInsert], [item].[dateUpdate], [item].[OrganizationExpertiseTypeID], [item].[OrganizationName], [item].[OrganizationNumber], [item].[OrganizationParentID], [item].[OrganizationTypeID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_Organization] AS [item]
WHERE [item].[OrganizationID] = @__organization_OrganizationId_0
2019-07-25 08:34:38,904 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:34:38,904 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:34:38,967 INFO - Request finished in 71.0313ms 200 
2019-07-25 08:34:38,985 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:34:39,133 INFO - Request finished in 236.4721ms 200 text/html
2019-07-25 08:34:39,367 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:34:39,372 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:34:39,797 INFO - Request finished in 421.9839ms 200 application/json;charset=utf-8
2019-07-25 08:35:36,751 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 160
2019-07-25 08:35:36,756 INFO - CORS policy execution failed.
2019-07-25 08:35:36,759 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:35:38,669 INFO - Successfully validated the token.
2019-07-25 08:35:38,674 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:35:38,756 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:35:38,771 INFO - Authorization was successful.
2019-07-25 08:35:39,243 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:35:39,252 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:35:40,344 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:35:40,432 WARN - The Include operation for navigation '[x].OrganizationExpertiseType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:35:40,434 WARN - The Include operation for navigation '[x].OrganizationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:35:41,204 INFO - Executed DbCommand (93ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:35:41,267 WARN - Query: '(from Organization x in DbSet<Organization> select [x]).Skip(__p_0).Take(__p_1)' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-25 08:35:41,619 INFO - Executed DbCommand (77ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2019-07-25 08:35:55,546 INFO - Executed DbCommand (76ms) [Parameters=[@__organization_OrganizationId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[OrganizationID], [item].[Comment], [item].[dateInsert], [item].[dateUpdate], [item].[OrganizationExpertiseTypeID], [item].[OrganizationName], [item].[OrganizationNumber], [item].[OrganizationParentID], [item].[OrganizationTypeID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_Organization] AS [item]
WHERE [item].[OrganizationID] = @__organization_OrganizationId_0
2019-07-25 08:39:45,356 INFO - Request starting HTTP/1.1 GET http://localhost:59821/index.html  
2019-07-25 08:39:45,356 INFO - Request starting HTTP/1.1 DEBUG http://localhost:59821/  0
2019-07-25 08:39:45,397 INFO - Request finished in 63.4667ms 200 
2019-07-25 08:39:45,416 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:39:45,578 INFO - Request finished in 243.7341ms 200 text/html
2019-07-25 08:39:45,786 INFO - Request starting HTTP/1.1 GET http://localhost:59821/swagger/v1/swagger.json  
2019-07-25 08:39:45,798 DEBUG - AuthenticationScheme: Bearer was not authenticated.
2019-07-25 08:39:46,237 INFO - Request finished in 445.5981ms 200 application/json;charset=utf-8
2019-07-25 08:40:52,887 INFO - Request starting HTTP/1.1 PUT http://localhost:59821/api/v1/Organization/Organization/1 application/json-patch+json 188
2019-07-25 08:40:52,899 INFO - CORS policy execution failed.
2019-07-25 08:40:52,904 INFO - Request origin http://localhost:59821 does not have permission to access the resource.
2019-07-25 08:40:54,886 INFO - Successfully validated the token.
2019-07-25 08:40:54,892 DEBUG - AuthenticationScheme: Bearer was successfully authenticated.
2019-07-25 08:40:54,971 INFO - Route matched with {action = "PutOrganizationAsync", controller = "Organization"}. Executing action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API)
2019-07-25 08:40:54,988 INFO - Authorization was successful.
2019-07-25 08:40:55,455 INFO - 'PutOrganizationAsync' has been invoked
2019-07-25 08:40:55,462 INFO - Executing action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) with arguments (1, Malam.Mastpen.HR.Core.BL.Requests.OrganizationRequest) - Validation state: Valid
2019-07-25 08:40:56,553 INFO - Entity Framework Core 2.2.4-servicing-10062 initialized 'MastpenBitachonDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-07-25 08:40:56,642 WARN - The Include operation for navigation '[x].OrganizationExpertiseType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:40:56,644 WARN - The Include operation for navigation '[x].OrganizationType' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-25 08:40:57,448 INFO - Executed DbCommand (87ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [BB_GEN_Organization] AS [x]
2019-07-25 08:40:57,512 WARN - Query: '(from Organization x in DbSet<Organization> select [x]).Skip(__p_0).Take(__p_1)' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-25 08:40:57,843 INFO - Executed DbCommand (76ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [x].[OrganizationID], [x].[Comment], [x].[dateInsert], [x].[dateUpdate], [x].[OrganizationExpertiseTypeID], [x].[OrganizationName], [x].[OrganizationNumber], [x].[OrganizationParentID], [x].[OrganizationTypeID], [x].[state], [x].[userInsert], [x].[UserUpdate], [x.OrganizationType].[OrganizationTypeID], [x.OrganizationType].[dateInsert], [x.OrganizationType].[dateUpdate], [x.OrganizationType].[OrganizationTypeName], [x.OrganizationType].[state], [x.OrganizationType].[userInsert], [x.OrganizationType].[UserUpdate], [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID], [x.OrganizationExpertiseType].[dateInsert], [x.OrganizationExpertiseType].[dateUpdate], [x.OrganizationExpertiseType].[OrganizationTypeName], [x.OrganizationExpertiseType].[state], [x.OrganizationExpertiseType].[userInsert], [x.OrganizationExpertiseType].[UserUpdate]
FROM [BB_GEN_Organization] AS [x]
LEFT JOIN [BB_GEN_OrganizationType] AS [x.OrganizationType] ON [x].[OrganizationTypeID] = [x.OrganizationType].[OrganizationTypeID]
LEFT JOIN [BB_GEN_OrganizationExpertiseType] AS [x.OrganizationExpertiseType] ON [x].[OrganizationExpertiseTypeID] = [x.OrganizationExpertiseType].[OrganizationExpertiseTypeID]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2019-07-25 08:41:04,592 INFO - Executed DbCommand (81ms) [Parameters=[@__organization_OrganizationId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [item].[OrganizationID], [item].[Comment], [item].[dateInsert], [item].[dateUpdate], [item].[OrganizationExpertiseTypeID], [item].[OrganizationName], [item].[OrganizationNumber], [item].[OrganizationParentID], [item].[OrganizationTypeID], [item].[state], [item].[userInsert], [item].[UserUpdate]
FROM [BB_GEN_Organization] AS [item]
WHERE [item].[OrganizationID] = @__organization_OrganizationId_0
2019-07-25 08:41:23,665 INFO - Executed DbCommand (73ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [BB_GEN_Organization] SET [Comment] = @p0, [dateInsert] = @p1, [dateUpdate] = @p2, [OrganizationExpertiseTypeID] = @p3, [OrganizationName] = @p4, [OrganizationNumber] = @p5, [OrganizationParentID] = @p6, [OrganizationTypeID] = @p7, [state] = @p8, [userInsert] = @p9, [UserUpdate] = @p10
WHERE [OrganizationID] = @p11;
SELECT @@ROWCOUNT;
2019-07-25 08:41:23,780 INFO - Executed action method Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 28315.6167ms.
2019-07-25 08:41:23,781 INFO - The PutOrganizationAsync have been retrieved successfully.
2019-07-25 08:41:23,794 INFO - Executing ObjectResult, writing value of type 'Malam.Mastpen.Core.BL.Responses.ResponseBasic'.
2019-07-25 08:41:23,809 INFO - Executed action Malam.Mastpen.API.Controllers.OrganizationController.PutOrganizationAsync (Malam.Mastpen.HR.API) in 28831.2813ms
2019-07-25 08:41:23,822 INFO - Request finished in 30933.7054ms 200 application/json; charset=utf-8
